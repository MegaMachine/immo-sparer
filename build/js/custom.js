function n(){var e=$("header.header").outerHeight();$("section.webinar-info").css("min-height","calc(100vh - "+e+"px)")}function o(){var e,t,a=$(".webinar-info h2"),n=a.css("marginBottom");$(a[0]).outerHeight()<=$(a[1]).outerHeight()?($(a[0]).css("marginBottom",n),e=$(a[0]).outerHeight(),t=$(a[1]).outerHeight()-e,$(a[0]).css("marginBottom",parseFloat($(a[0]).css("marginBottom"))+t+"px")):($(a[1]).css("marginBottom",n),e=$(a[1]).outerHeight(),t=$(a[0]).outerHeight()-e,$(a[1]).css("marginBottom",parseFloat($(a[1]).css("marginBottom"))+t+"px"))}function i(){991<=window.outerWidth&&setTimeout(function(){var e=$("body").outerWidth(),t=$(".seminare-and-map .map").offset().left;$(".seminare-and-map .map .map-wrap").css({width:e-t+"px"}),console.log(t)},111)}function s(){var e=parseFloat($(".new-properties__item__text p").css("lineHeight")),t=$(".new-properties__item__text h3"),a=$(".new-properties__item__location div"),n=0,o=0;a.removeAttr("style"),t.removeAttr("style"),a.map(function(){$(this).outerHeight()>=n&&(n=$(this).outerHeight())}),t.map(function(){$(this).height()>=o&&(o=$(this).height())}),a.css("height",n+"px"),t.css("height",o+"px"),$(".new-properties__item__text p").css("height",2*e+"px")}$(function(){!function(){for(var e=$(".header__bottom__nav ul li a"),t=0;t<e.length;t++){var a=document.createElement("li"),n=$(e[t]).clone();$(n).removeClass("dropdown-item"),$(n).appendTo(a),$(a).appendTo(".header__bottom__nav__mobile ul")}$(".header__mid__contacts__phones").clone().appendTo(".header__bottom__nav__mobile"),$(".header__top .log-or-reg").clone().appendTo(".header__bottom__nav__mobile")}(),e(),setTimeout(function(){var e,t,a;n(),o(),i(),s(),e=$(".object-fit-simulation"),t=e.find("img"),a=t.attr("src"),t.css("display","none"),e.css({background:"url("+a+") no-repeat center / cover"})},111),$(window).scroll(function(){}),$(window).resize(function(){n(),o(),s(),i()}),$(".menu-button").click(function(){$(this).toggleClass("is-active"),$(".header__bottom__nav__mobile").toggleClass("active")}),$("#show-agents").click(function(){e()})});var a=!1;function e(){var e=$(".agents .row>div");if(a)e.fadeIn(),a=!a;else{for(var t=2;t<e.length;t++)$(e[t]).fadeOut();a=!a}console.log(e)}window.initMap=function(){var e={lat:c.lat,lng:c.log};r=new google.maps.Map(document.getElementById("map"),{zoom:7,center:e,mapTypeId:c.type}),b(d)};var r,c,l,d,p,h,u,m,g=[],t={states:[],cities:[],eventsType:[]};function v(e,t,a){y(null),g=[];var n={state_id:e?[Number(e)]:null,city_id:t?[Number(t)]:null,event_type_id:a?[Number(a)]:null},o=_.pickBy(n,_.identity);d=_.filter(l.events_dict,o),f(),b(d),y(r),console.log(d.length,l.events_dict.length),d.length!==l.events_dict.length?(r.setCenter({lat:parseFloat(d[0].latitude),lng:parseFloat(d[0].longitude)}),r.setZoom(14),console.log("+")):(r.setCenter({lat:c.lat,lng:c.log}),r.setZoom(7),console.log("-"))}function f(){var r,c=$(".seminare__search__list ul");c.html(""),d.map(function(e){r=document.createElement("li");var t=e.street?e.street:"",a=e.zip?e.zip:"",n=e.city_id[1]?e.city_id[1]:"",o=String(e.date_begin).substr(0,9).replace("-",".").replace("-",".");o=(o=(o=o.split(".")).reverse()).join(".");var i=String(e.date_begin).replace(":",".").replace(":",".").substr(11,15),s=String(e.date_end).replace(":",".").replace(":",".").substr(11,15);i=i.substr(0,5),s=s.substr(0,5),$(r).html("<h3>"+e.name+"</h3><div><p>"+t+" "+a+" "+n+'</p><a class="button blue" href="event/'+e.id+'"><span>Platz reservieren</span></a></div><span>Am '+o+" von "+i+" bis "+s+" Uhr</span>"),$(r).appendTo(c)})}function b(e){console.log(e),e.map(function(e){var t=e.street?e.street+" ,":"",a=e.city_id[1]?e.city_id[1]+" ,":"",n=e.country_id[1]?e.country_id[1]:"",o=e.zip?e.zip:"",i='<div class="marker-info"><div class="marker-info-title"><span></span><h2>'+e.city_id[1]+'</h2></div><div class="marker-info-content"><a href="tel:123" class="phone">123123123123</a><p class="address"><span>'+t+"</span><span>"+o+" "+a+"</span> <span>"+n+"</span></p></div> </div>";!function(e,t){new google.maps.LatLngBounds;var a=new google.maps.LatLng(e.lat,e.lng),n=new google.maps.Marker({center:a,position:a,map:r});n.setVisible(!1),new google.maps.InfoWindow({content:t}).open(r,n),g.push(n)}({lat:e.latitude,lng:e.longitude},i)})}function y(e){for(var t=0;t<g.length;t++)g[t].setMap(e)}$(document).ready(function(){c={lat:parseFloat($("#latitude").val())||50.9913249,log:parseFloat($("#longitude").val())||9.4721966,type:$("#template_type").val()||"terrain"},$(window).resize(function(){}),p=$(".seminare__search__filter__state select"),h=$(".seminare__search__filter__city select"),u=$(".seminare__search__filter__type select"),p.select2({width:"resolve",theme:"classic",placeholder:"Select a state",allowClear:!0}),h.select2({width:"resolve",theme:"classic",placeholder:"Select a city",allowClear:!0}),u.select2({width:"resolve",theme:"classic",placeholder:"Select a event type",allowClear:!0}),$(".select2-selection__clear").click(function(){v(p.val(),h.val(),u.val())}),$(".seminare__search__filter select").change(function(){v(p.val(),h.val(),u.val())}),$(".seminare__search__filter__city select").change(function(){!p.val()&&h.val()?p.prop("disabled",!0):p.prop("disabled",!1),v(p.val(),h.val(),u.val())}),$(".seminare__search__filter__state select").change(function(){$(this).val()?(t.cities=[],t.cities=_.filter(l.cities_dict,{state_id:Number($(this).val())}),h.html("<option></option>"),t.cities.map(function(e){var t=new Option(e.name,e.id);h.append(t)})):(t.cities=[],t.cities=l.cities_dict,h.html("<option></option>"),t.cities.map(function(e){var t=new Option(e.name,e.id);h.append(t)})),v(p.val(),h.val(),u.val())}),$(document).on("click",".marker-info",function(){$(this).hasClass("active")?$(this).removeClass("active"):($(".marker-info").removeClass("active"),$(this).addClass("active"))}),$.when($.ajax({type:"GET",url:"http://localhost:3000/json/data.json",dataType:"json",async:!1,success:function(e){d=(l=e).events_dict,console.log("good: ",e)},error:function(e){console.log("error: ",e)}})).done(function(){!function(){var e=document.createElement("script");e.async=!0,e.defer=!0,e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDfcs6mV0XqyFqpo34GSATKLtePqTgc0WI&callback=initMap";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),document.body.appendChild(e)}(),t.states=l.state_dict,t.cities=l.cities_dict,t.eventsType=l.event_categories,t.states.map(function(e){var t=new Option(e.name,e.id);p.append(t)}),t.cities.map(function(e){var t=new Option(e.name,e.id);h.append(t)}),t.eventsType.map(function(e){var t=new Option(e.name,e.id);u.append(t)}),f()})}),Chart.plugins.unregister(ChartDataLabels),Chart.defaults.global.defaultFontColor="#292929",Chart.defaults.global.defaultFontSize=14,Chart.defaults.global.defaultFontFamily="Poppins-SemiBold";var w="http://localhost:3000/json/";function C(e,t){return $.ajax({type:"GET",url:e+t+".json",dataType:"json",async:!1,success:function(e){m=e,console.log(m)},error:function(e){console.log("error: ",e)}})}function k(e,t,a){var n,o,i,s,r,c,l;r={display:!0,layout:{padding:{left:20,top:30}},legend:{display:!1},plugins:{datalabels:{color:"#292929",anchor:"end",align:"top",formatter:function(e,t){return e+" €"}}},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e,t,a){return e+" €"}}}]}},t&&(document.querySelector(".charts__block__item.one .charts__block__item__chart").innerHTML="",(c=document.createElement("canvas")).id="myChartOne",c.height="250",document.querySelector(".charts__block__item.one .charts__block__item__chart").appendChild(c),n=document.getElementById("myChartOne").getContext("2d"),i={labels:e||m.label,datasets:[{data:t||m.chart[0].data1,backgroundColor:"#44acd7",borderColor:"#44acd7",borderWidth:1}]},new Chart(n,{type:"bar",data:i,plugins:[ChartDataLabels],options:r})),a&&(document.querySelector(".charts__block__item.two .charts__block__item__chart").innerHTML="",(l=document.createElement("canvas")).id="myChartTwo",l.height="250",document.querySelector(".charts__block__item.two .charts__block__item__chart").appendChild(l),o=document.getElementById("myChartTwo").getContext("2d"),s={labels:e||m.label,datasets:[{data:a||m.chart[0].data2,backgroundColor:"#44acd7",borderColor:"#44acd7",borderWidth:1}]},new Chart(o,{type:"bar",data:s,plugins:[ChartDataLabels],options:r}))}$(document).ready(function(){$.when(C(w,"1")).done(function(){k(m.label,m.chart[0].data1,m.chart[0].data2)}),$(window).resize(function(){window.outerWidth});for(var e=$(".charts__buttons"),t=0;t<m.percents.length;t++){var a=null;(a=document.createElement("button")).value=m.percents[t],a.classList.add("button"),a.classList.add("red"),$(a).html("<span>"+m.percents[t]+"%</span>"),$(a).appendTo(e)}$(".charts__buttons button").click(function(){$.when(C(w,$(this).val())).done(function(){k(m.label,m.chart[0].data1,m.chart[0].data2)})}),$(".charts__block__item.one .charts__block__item__input input").change(function(){$.when(C(w+"chart-input-one",$(this).val())).done(function(){k(m.label,m.chart[0].data1,m.chart[0].data2)})}),$(".charts__block__item.two .charts__block__item__input input").change(function(){$.when(C(w+"chart-input-two",$(this).val())).done(function(){k(m.label,m.chart[0].data1,m.chart[0].data2)})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJtYXAuanMiLCJjaGFydHMuanMiXSwibmFtZXMiOlsiaGVhZGVySGVpZ2h0IiwiaGVpZ2h0IiwiJCIsIm91dGVySGVpZ2h0IiwiY3NzIiwidGl0bGVBbGlnbiIsIm1pbiIsIml0ZW1zIiwiZGVmYXVsdE1hcmdpbiIsInBhcnNlRmxvYXQiLCJtYXBXaWR0aCIsIndpbmRvdyIsIm91dGVyV2lkdGgiLCJzZXRUaW1lb3V0Iiwid2luZG93V2lkdGgiLCJtYXBPZmZzZXQiLCJvZmZzZXQiLCJsZWZ0Iiwid2lkdGgiLCJjb25zb2xlIiwibG9nIiwibmV3UHJvcGVydGllc0l0ZW1IZWlnaHQiLCJpdGVtc0xpbmVIZWlnaHQiLCJpdGVtc1RleHRUaXRsZSIsIml0ZW1zTG9jYXRpb25IZWlnaHQiLCJtYXhIZWlnaHQxIiwibWF4SGVpZ2h0MiIsInJlbW92ZUF0dHIiLCJtYXAiLCJ0aGlzIiwibGlua3MiLCJpbmRleCIsImxlbmd0aCIsImxpIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xvbmVMaW5rIiwiY2xvbmUiLCJyZW1vdmVDbGFzcyIsImFwcGVuZFRvIiwiaGVhZGVyQ2xvbmVGb3JNb2JpbGUiLCJzaG93QWdlbnRzIiwic2ltdWxhdG9yIiwiaW1nIiwiaW1nU3JjIiwiZmluZCIsImF0dHIiLCJiYWNrZ3JvdW5kIiwic2Nyb2xsIiwicmVzaXplIiwiY2xpY2siLCJ0b2dnbGVDbGFzcyIsInNob3dBZ2VudHNTdGF0dXMiLCJhZ2VudHMiLCJmYWRlSW4iLCJpIiwiZmFkZU91dCIsImluaXRNYXAiLCJoYWlnaHRBc2hidXJ5IiwibGF0Iiwic3RhcnRQb3NpdGlvbiIsImxuZyIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJtYXBUeXBlSWQiLCJ0eXBlIiwiY3JlYXRlTWFya2Vyc0dyb3VwIiwic2VhcmNoUmVzdWx0Iiwib2JqZWN0cyIsInNlbGVjdFN0YXRlIiwic2VsZWN0Q2l0eSIsInNlbGVjdFR5cGUiLCJjaGFydHNEYXRhIiwibWFya2VycyIsImZpbHRlclZhbHVlcyIsInN0YXRlcyIsImNpdGllcyIsImV2ZW50c1R5cGUiLCJmaWx0ZXJTb3J0Iiwic3RhdGUiLCJjaXR5IiwiZXZlbnRfdHlwZSIsInNldE1hcE9uQWxsIiwib2JqIiwic3RhdGVfaWQiLCJOdW1iZXIiLCJjaXR5X2lkIiwiZXZlbnRfdHlwZV9pZCIsImZpbmRPYmoiLCJfIiwicGlja0J5IiwiaWRlbnRpdHkiLCJmaWx0ZXIiLCJldmVudHNfZGljdCIsImJ1aWxkU2VhcmNoTGlzdCIsInNldENlbnRlciIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwic2V0Wm9vbSIsInVsIiwiaHRtbCIsIml0ZW0iLCJzdHJlZXQiLCJ6aXAiLCJkYXRlIiwiU3RyaW5nIiwiZGF0ZV9iZWdpbiIsInN1YnN0ciIsInJlcGxhY2UiLCJzcGxpdCIsInJldmVyc2UiLCJqb2luIiwidGltZVN0YXJ0IiwidGltZUVuZCIsImRhdGVfZW5kIiwibmFtZSIsImlkIiwiY291bnRyeSIsImNvdW50cnlfaWQiLCJjb250ZW50U3RyaW5nIiwibG9jYXRpb24iLCJMYXRMbmdCb3VuZHMiLCJsYXRMbmciLCJMYXRMbmciLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInNldFZpc2libGUiLCJJbmZvV2luZG93IiwiY29udGVudCIsIm9wZW4iLCJwdXNoIiwiYWRkTWFya2VyIiwic2V0TWFwIiwicmVhZHkiLCJ2YWwiLCJzZWxlY3QyIiwidGhlbWUiLCJwbGFjZWhvbGRlciIsImFsbG93Q2xlYXIiLCJjaGFuZ2UiLCJwcm9wIiwiY2l0aWVzX2RpY3QiLCJvcHRpb24iLCJPcHRpb24iLCJhcHBlbmQiLCJvbiIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJ3aGVuIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiYXN5bmMiLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwiX2Vycm9yIiwiZG9uZSIsInNjcmlwdCIsImRlZmVyIiwic3JjIiwiZmlyc3RTY3JpcHRUYWciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJsb2FkU2NyaXB0TWFwIiwic3RhdGVfZGljdCIsImV2ZW50X2NhdGVnb3JpZXMiLCJDaGFydCIsInBsdWdpbnMiLCJ1bnJlZ2lzdGVyIiwiQ2hhcnREYXRhTGFiZWxzIiwiZGVmYXVsdHMiLCJnbG9iYWwiLCJkZWZhdWx0Rm9udENvbG9yIiwiZGVmYXVsdEZvbnRTaXplIiwiZGVmYXVsdEZvbnRGYW1pbHkiLCJ1cmxDaGFydHMiLCJnZXRCdXR0b25EYXRhIiwidmFsdWUiLCJpbml0c0NoYXJ0cyIsImxhYmVscyIsImRhdGExIiwiZGF0YTIiLCJjdHhPbmUiLCJjdHhUd28iLCJkYXRhT25lIiwiZGF0YVR3byIsInNldE9wdGlvbnMiLCJjaGFydENvbnRhaW5lck9uZSIsImNoYXJ0Q29udGFpbmVyVHdvIiwiZGlzcGxheSIsImxheW91dCIsInBhZGRpbmciLCJ0b3AiLCJsZWdlbmQiLCJkYXRhbGFiZWxzIiwiY29sb3IiLCJhbmNob3IiLCJhbGlnbiIsImZvcm1hdHRlciIsImNvbnRleHQiLCJzY2FsZXMiLCJ5QXhlcyIsInRpY2tzIiwiYmVnaW5BdFplcm8iLCJjYWxsYmFjayIsInZhbHVlcyIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lckhUTUwiLCJnZXRDb250ZXh0IiwibGFiZWwiLCJkYXRhc2V0cyIsImNoYXJ0IiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsIm9wdGlvbnMiLCJjaGFydHNCdXR0b25zQ29udGFpbmVyIiwicGVyY2VudHMiLCJidXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiXSwibWFwcGluZ3MiOiJBQXVDQSxTQUFBQSxJQUNBLElBQUFDLEVBQUFDLEVBQUEsaUJBQUFDLGNBQ0FELEVBQUEsd0JBQUFFLElBQUEsYUFBQSxnQkFBQUgsRUFBQSxPQUlBLFNBQUFJLElBQ0EsSUFHQUMsRUFDQUwsRUFKQU0sRUFB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Q0FBLEVBQUFqTSxTQUFBQyxjQUFBLFdBQ0F1SixNQUFBOUcsRUFBQXNKLFNBQUEzSyxHQUNBNEssRUFBQUMsVUFBQUMsSUFBQSxVQUNBRixFQUFBQyxVQUFBQyxJQUFBLE9BQ0FuTyxFQUFBaU8sR0FBQTNILEtBQUEsU0FBQTVCLEVBQUFzSixTQUFBM0ssR0FBQSxZQUNBckQsRUFBQWlPLEdBQUE1TCxTQUFBMEwsR0FHQS9OLEVBQUEsMkJBQUFnRCxNQUFBLFdBQ0FoRCxFQUFBdUosS0FBQWdDLEVBQUFELEVBQUF0TCxFQUFBMkIsTUFBQThHLFFBQUF1QixLQUFBLFdBQ0F5QixFQUFBL0csRUFBQThJLE1BQUE5SSxFQUFBZ0osTUFBQSxHQUFBL0IsTUFBQWpILEVBQUFnSixNQUFBLEdBQUE5QixXQUlBNUwsRUFBQSw4REFBQThJLE9BQUEsV0FDQTlJLEVBQUF1SixLQUFBZ0MsRUFBQUQsRUFBQSxrQkFBQXRMLEVBQUEyQixNQUFBOEcsUUFBQXVCLEtBQUEsV0FDQXlCLEVBQUEvRyxFQUFBOEksTUFBQTlJLEVBQUFnSixNQUFBLEdBQUEvQixNQUFBakgsRUFBQWdKLE1BQUEsR0FBQTlCLFdBSUE1TCxFQUFBLDhEQUFBOEksT0FBQSxXQUNBOUksRUFBQXVKLEtBQUFnQyxFQUFBRCxFQUFBLGtCQUFBdEwsRUFBQTJCLE1BQUE4RyxRQUFBdUIsS0FBQSxXQUNBeUIsRUFBQS9HLEVBQUE4SSxNQUFBOUksRUFBQWdKLE1BQUEsR0FBQS9CLE1BQUFqSCxFQUFBZ0osTUFBQSxHQUFBOUIiLCJmaWxlIjoiY3VzdG9tLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbigpIHtcbiAgaGVhZGVyQ2xvbmVGb3JNb2JpbGUoKTtcbiAgc2hvd0FnZW50cygpO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGhlYWRlckhlaWdodCgpO1xuICAgIHRpdGxlQWxpZ24oKTtcbiAgICBtYXBXaWR0aCgpO1xuICAgIG5ld1Byb3BlcnRpZXNJdGVtSGVpZ2h0KCk7XG4gICAgb2JqZWN0Rml0U2ltdWxhdGlvbigpO1xuICB9LCAxMTEpO1xuXG4gICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7fSk7XG5cbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICBoZWFkZXJIZWlnaHQoKTtcbiAgICB0aXRsZUFsaWduKCk7XG4gICAgbmV3UHJvcGVydGllc0l0ZW1IZWlnaHQoKTtcbiAgICBtYXBXaWR0aCgpO1xuICB9KTtcbiAgJCgnLm1lbnUtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAkKCcuaGVhZGVyX19ib3R0b21fX25hdl9fbW9iaWxlJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICB9KTtcbiAgJCgnI3Nob3ctYWdlbnRzJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICBzaG93QWdlbnRzKCk7XG4gIH0pO1xufSk7XG5cbi8vb2JqZWN0LWZpdC1zaW11bGF0aW9uXG5mdW5jdGlvbiBvYmplY3RGaXRTaW11bGF0aW9uKCl7XG4gIHZhciBzaW11bGF0b3IgPSAkKCcub2JqZWN0LWZpdC1zaW11bGF0aW9uJyk7XG4gIHZhciBpbWcgPSBzaW11bGF0b3IuZmluZCgnaW1nJyk7XG4gIHZhciBpbWdTcmMgPSBpbWcuYXR0cignc3JjJyk7XG4gIGltZy5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XG4gIHNpbXVsYXRvci5jc3Moe1xuICAgICdiYWNrZ3JvdW5kJzondXJsKCcraW1nU3JjKycpIG5vLXJlcGVhdCBjZW50ZXIgLyBjb3ZlcicsXG4gIH0pO1xufVxuLy93ZWJpbmFyIGhlaWdodFxuZnVuY3Rpb24gaGVhZGVySGVpZ2h0KCkge1xuICB2YXIgaGVpZ2h0ID0gJChcImhlYWRlci5oZWFkZXJcIikub3V0ZXJIZWlnaHQoKTtcbiAgJChcInNlY3Rpb24ud2ViaW5hci1pbmZvXCIpLmNzcyhcIm1pbi1oZWlnaHRcIiwgXCJjYWxjKDEwMHZoIC0gXCIgKyBoZWlnaHQgKyBcInB4KVwiKTtcbn1cblxuLy93ZWJpbmFyIHRpdGxlIGFsaWduXG5mdW5jdGlvbiB0aXRsZUFsaWduKCkge1xuICB2YXIgaXRlbXMgPSAkKFwiLndlYmluYXItaW5mbyBoMlwiKTtcbiAgdmFyIGRlZmF1bHRNYXJnaW4gPSBpdGVtcy5jc3MoJ21hcmdpbkJvdHRvbScpO1xuICB2YXIgbWF4O1xuICB2YXIgbWluO1xuICB2YXIgaGVpZ2h0O1xuICBpZiAoJChpdGVtc1swXSkub3V0ZXJIZWlnaHQoKSA8PSAkKGl0ZW1zWzFdKS5vdXRlckhlaWdodCgpKSB7XG4gICAgJChpdGVtc1swXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIGRlZmF1bHRNYXJnaW5cbiAgICApO1xuICAgIG1pbiA9ICQoaXRlbXNbMF0pLm91dGVySGVpZ2h0KCk7XG4gICAgbWF4ID0gJChpdGVtc1sxXSkub3V0ZXJIZWlnaHQoKTtcbiAgICBoZWlnaHQgPSBtYXggLSBtaW47XG4gICAgJChpdGVtc1swXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIHBhcnNlRmxvYXQoJChpdGVtc1swXSkuY3NzKFwibWFyZ2luQm90dG9tXCIpKSArIGhlaWdodCArIFwicHhcIlxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgJChpdGVtc1sxXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIGRlZmF1bHRNYXJnaW5cbiAgICApO1xuICAgIG1pbiA9ICQoaXRlbXNbMV0pLm91dGVySGVpZ2h0KCk7XG4gICAgbWF4ID0gJChpdGVtc1swXSkub3V0ZXJIZWlnaHQoKTtcbiAgICBoZWlnaHQgPSBtYXggLSBtaW47XG4gICAgJChpdGVtc1sxXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIHBhcnNlRmxvYXQoJChpdGVtc1sxXSkuY3NzKFwibWFyZ2luQm90dG9tXCIpKSArIGhlaWdodCArIFwicHhcIlxuICAgICk7XG4gIH1cbn1cblxuLy9tYXAgc2l6ZVxuZnVuY3Rpb24gbWFwV2lkdGgoKSB7XG4gIGlmKHdpbmRvdy5vdXRlcldpZHRoID49IDk5MSl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgdmFyIHdpbmRvd1dpZHRoID0gJChcImJvZHlcIikub3V0ZXJXaWR0aCgpO1xuICAgICAgdmFyIG1hcE9mZnNldCA9ICQoXCIuc2VtaW5hcmUtYW5kLW1hcCAubWFwXCIpLm9mZnNldCgpLmxlZnQ7XG4gICAgICAvLyB2YXIgc2VtaW5hcldJZHRoID0gJCgnLnNlbWluYXJlLWFuZC1tYXAgLnNlbWluYXJlJykub3V0ZXJXaWR0aCgpO1xuICAgICAgLy8gdmFyIGNvbnRhaW5lclBhZGRpbmcgPSBwYXJzZUZsb2F0KCQoJy5zZW1pbmFyZS1hbmQtbWFwIC5jb250YWluZXInKS5jc3MoJ3BhZGRpbmdMZWZ0JykpO1xuICAgICAgLy8gdmFyIGNvbnRhaW5lckhlaWdodCA9IHBhcnNlRmxvYXQoJCgnLnNlbWluYXJlLWFuZC1tYXAgLmNvbnRhaW5lcicpLm91dGVySGVpZ2h0KCkpO1xuICAgICAgJChcIi5zZW1pbmFyZS1hbmQtbWFwIC5tYXAgLm1hcC13cmFwXCIpLmNzcyh7XG4gICAgICAgIFwid2lkdGhcIjogd2luZG93V2lkdGggLSBtYXBPZmZzZXQgKyBcInB4XCIsXG4gICAgICAgIC8vICdsZWZ0Jzogc2VtaW5hcldJZHRoICsgY29udGFpbmVyUGFkZGluZyArICdweCcsXG4gICAgICAgIC8vICdoZWlnaHQnOiBjb250YWluZXJIZWlnaHQgKyAncHgnXG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKG1hcE9mZnNldCk7XG4gICAgfSwxMTEpO1xuICB9XG59XG5cbi8vIG5ldy1wcm9wZXJpdGllcyBuZXctcHJvcGVydGllc19faXRlbV9fdGV4dCBoZWlnaHRcbmZ1bmN0aW9uIG5ld1Byb3BlcnRpZXNJdGVtSGVpZ2h0KCl7XG4gIHZhciBpdGVtc0xpbmVIZWlnaHQgPSBwYXJzZUZsb2F0KCQoJy5uZXctcHJvcGVydGllc19faXRlbV9fdGV4dCBwJykuY3NzKCdsaW5lSGVpZ2h0JykpO1xuICB2YXIgaXRlbXNUZXh0VGl0bGUgPSAkKCcubmV3LXByb3BlcnRpZXNfX2l0ZW1fX3RleHQgaDMnKTtcbiAgdmFyIGl0ZW1zTG9jYXRpb25IZWlnaHQgPSAgJCgnLm5ldy1wcm9wZXJ0aWVzX19pdGVtX19sb2NhdGlvbiBkaXYnKTtcbiAgdmFyIG1heEhlaWdodDEgPSAwO1xuICB2YXIgbWF4SGVpZ2h0MiA9IDA7XG4gIGl0ZW1zTG9jYXRpb25IZWlnaHQucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgaXRlbXNUZXh0VGl0bGUucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgaXRlbXNMb2NhdGlvbkhlaWdodC5tYXAoZnVuY3Rpb24oKXsgICBcbiAgICBpZigkKHRoaXMpLm91dGVySGVpZ2h0KCkgPj0gbWF4SGVpZ2h0MSl7XG4gICAgICBtYXhIZWlnaHQxID0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xuICAgIH1cbiAgfSk7XG4gIGl0ZW1zVGV4dFRpdGxlLm1hcChmdW5jdGlvbigpe1xuICAgIGlmKCQodGhpcykuaGVpZ2h0KCkgPj0gbWF4SGVpZ2h0Mil7XG4gICAgICBtYXhIZWlnaHQyID0gJCh0aGlzKS5oZWlnaHQoKTtcbiAgICB9XG4gIH0pO1xuICBpdGVtc0xvY2F0aW9uSGVpZ2h0LmNzcygnaGVpZ2h0JywgbWF4SGVpZ2h0MSArICdweCcpO1xuICBpdGVtc1RleHRUaXRsZS5jc3MoJ2hlaWdodCcsIG1heEhlaWdodDIgKyAncHgnKTtcbiAgJCgnLm5ldy1wcm9wZXJ0aWVzX19pdGVtX190ZXh0IHAnKS5jc3MoJ2hlaWdodCcsIGl0ZW1zTGluZUhlaWdodCAqIDIgKyAncHgnKTtcbn1cblxuZnVuY3Rpb24gaGVhZGVyQ2xvbmVGb3JNb2JpbGUoKXtcbiAgdmFyIGxpbmtzID0gICQoJy5oZWFkZXJfX2JvdHRvbV9fbmF2IHVsIGxpIGEnKTtcbiAgLy8gJCgnLmhlYWRlcl9fYm90dG9tX19uYXYgdWwgYScpLmNsb25lKCkuYXBwZW5kVG8oJy5oZWFkZXJfX2JvdHRvbV9fbmF2X19tb2JpbGUgdWwnKTtcbiAgXG4gIC8vIGhlYWRlcl9fdG9wIGxvZy1vci1yZWdcbiAgICAvL2hlYWRlcl9fdG9wIHNvY2lhbFxuICAgIC8vaGVhZGVyX19taWRfX2NvbnRhY3RzX19waG9uZXMgYVxuICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGlua3MubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgdmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICB2YXIgY2xvbmVMaW5rID0gICQobGlua3NbaW5kZXhdKS5jbG9uZSgpO1xuICAgICQoY2xvbmVMaW5rKS5yZW1vdmVDbGFzcygnZHJvcGRvd24taXRlbScpO1xuICAgICQoY2xvbmVMaW5rKS5hcHBlbmRUbyhsaSk7XG4gICAgJChsaSkuYXBwZW5kVG8oJy5oZWFkZXJfX2JvdHRvbV9fbmF2X19tb2JpbGUgdWwnKTsgICBcbiAgfVxuICAvLyAkKCcuaGVhZGVyX190b3AgZGl2LnNvY2lhbCcpLmNsb25lKCkuYXBwZW5kVG8oJy5oZWFkZXJfX2JvdHRvbV9fbmF2X19tb2JpbGUnKTtcbiAgJCgnLmhlYWRlcl9fbWlkX19jb250YWN0c19fcGhvbmVzJykuY2xvbmUoKS5hcHBlbmRUbygnLmhlYWRlcl9fYm90dG9tX19uYXZfX21vYmlsZScpO1xuICAkKCcuaGVhZGVyX190b3AgLmxvZy1vci1yZWcnKS5jbG9uZSgpLmFwcGVuZFRvKCcuaGVhZGVyX19ib3R0b21fX25hdl9fbW9iaWxlJyk7XG59XG5cbi8vU2hvdyBBZ2VudHMgYnV0dG9uXG52YXIgc2hvd0FnZW50c1N0YXR1cyA9IGZhbHNlO1xuZnVuY3Rpb24gc2hvd0FnZW50cygpeyBcbiAgdmFyIGFnZW50cyA9ICQoJy5hZ2VudHMgLnJvdz5kaXYnKTtcbiAgaWYoc2hvd0FnZW50c1N0YXR1cyl7XG4gICAgYWdlbnRzLmZhZGVJbigpO1xuICAgIHNob3dBZ2VudHNTdGF0dXMgPSAhc2hvd0FnZW50c1N0YXR1cztcbiAgfWVsc2V7XG4gICAgZm9yKHZhciBpID0gMjsgaSA8IGFnZW50cy5sZW5ndGg7IGkrKyl7XG4gICAgICAkKGFnZW50c1tpXSkuZmFkZU91dCgpO1xuICAgIH1cbiAgICBzaG93QWdlbnRzU3RhdHVzID0gIXNob3dBZ2VudHNTdGF0dXM7XG4gIH1cbiAgY29uc29sZS5sb2coYWdlbnRzKTtcbn0iLCIvLyAvL0dvb2dsZSBNYXBcbi8vPGlucHV0IGlkPVwibGF0aXR1ZGVcIiB0eXBlPVwiaGlkZGVuXCIgdC1hdHQtdmFsdWU9XCJjb3VudHJ5LmxhdGl0dWRlXCIvPlxuLy88aW5wdXQgaWQ9XCJsb25naXR1ZGVcIiB0eXBlPVwiaGlkZGVuXCIgdC1hdHQtdmFsdWU9XCJjb3VudHJ5LmxvbmdpdHVkZVwiLz5cbi8vPGlucHV0IGlkPVwidGVtcGxhdGVfdHlwZVwiIHR5cGU9XCJoaWRkZW5cIiB0LWF0dC12YWx1ZT1cInRlbXBsYXRlX3R5cGVcIi8+IFxuXG53aW5kb3cuaW5pdE1hcCA9IGluaXRNYXA7XG52YXIgdXJsTWFwID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9qc29uL2RhdGEuanNvbic7XG52YXIgbWFwO1xudmFyIG1hcmtlcnMgPSBbXTtcbnZhciBzdGFydFBvc2l0aW9uO1xudmFyIG9iamVjdHM7XG52YXIgc2VhcmNoUmVzdWx0O1xudmFyIGNoZWNrU3RhdGU7XG4vLyB2YXIgc2ltcGxlQmFyVWwgPSBuZXcgU2ltcGxlQmFyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtbGlzdCcpKTtcblxuLy/Ql9C90LDRh9C10L3QvdGPINC00LvRjyBzZWxlY3RcbnZhciBmaWx0ZXJWYWx1ZXMgPSB7XG4gIHN0YXRlczpbXSxcbiAgY2l0aWVzOltdLFxuICBldmVudHNUeXBlOltdXG59O1xuXG52YXIgc2VsZWN0U3RhdGU7XG52YXIgc2VsZWN0Q2l0eTtcbnZhciBzZWxlY3RUeXBlO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICBzdGFydFBvc2l0aW9uID0ge1xuICAgIGxhdCA6IHBhcnNlRmxvYXQoJCgnI2xhdGl0dWRlJykudmFsKCkpIHx8IDUwLjk5MTMyNDksXG4gICAgbG9nIDogcGFyc2VGbG9hdCgkKCcjbG9uZ2l0dWRlJykudmFsKCkpIHx8IDkuNDcyMTk2NixcbiAgICB0eXBlIDogJCgnI3RlbXBsYXRlX3R5cGUnKS52YWwoKSB8fCAndGVycmFpbidcbiAgfTtcbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe1xuXG4gIH0pO1xuXG4gIC8vR2V0IHNlbGVjdHNcbiAgc2VsZWN0U3RhdGUgPSAkKCcuc2VtaW5hcmVfX3NlYXJjaF9fZmlsdGVyX19zdGF0ZSBzZWxlY3QnKTtcbiAgc2VsZWN0Q2l0eSA9ICQoJy5zZW1pbmFyZV9fc2VhcmNoX19maWx0ZXJfX2NpdHkgc2VsZWN0Jyk7XG4gIHNlbGVjdFR5cGUgPSAkKCcuc2VtaW5hcmVfX3NlYXJjaF9fZmlsdGVyX190eXBlIHNlbGVjdCcpO1xuXG4gIHNlbGVjdFN0YXRlLnNlbGVjdDIoe1xuICAgIHdpZHRoOiAncmVzb2x2ZScsXG4gICAgdGhlbWU6IFwiY2xhc3NpY1wiLFxuICAgIHBsYWNlaG9sZGVyOiBcIlNlbGVjdCBhIHN0YXRlXCIsXG4gICAgYWxsb3dDbGVhcjogdHJ1ZVxuICB9KTtcbiAgc2VsZWN0Q2l0eS5zZWxlY3QyKHtcbiAgICB3aWR0aDogJ3Jlc29sdmUnLFxuICAgIHRoZW1lOiBcImNsYXNzaWNcIixcbiAgICBwbGFjZWhvbGRlcjogXCJTZWxlY3QgYSBjaXR5XCIsXG4gICAgYWxsb3dDbGVhcjogdHJ1ZVxuICB9KTtcbiAgc2VsZWN0VHlwZS5zZWxlY3QyKHtcbiAgICB3aWR0aDogJ3Jlc29sdmUnLFxuICAgIHRoZW1lOiBcImNsYXNzaWNcIixcbiAgICBwbGFjZWhvbGRlcjogXCJTZWxlY3QgYSBldmVudCB0eXBlXCIsXG4gICAgYWxsb3dDbGVhcjogdHJ1ZVxuICB9KTtcbiAgXG4gIC8vRmlsdGVyXG4gICQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fY2xlYXInKS5jbGljayhmdW5jdGlvbigpe1xuICAgIGZpbHRlclNvcnQoc2VsZWN0U3RhdGUudmFsKCksc2VsZWN0Q2l0eS52YWwoKSxzZWxlY3RUeXBlLnZhbCgpKTtcbiAgfSk7XG5cbiAgJCgnLnNlbWluYXJlX19zZWFyY2hfX2ZpbHRlciBzZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24oKXsgICBcbiAgICBmaWx0ZXJTb3J0KHNlbGVjdFN0YXRlLnZhbCgpLHNlbGVjdENpdHkudmFsKCksc2VsZWN0VHlwZS52YWwoKSk7XG4gIH0pO1xuICAkKCcuc2VtaW5hcmVfX3NlYXJjaF9fZmlsdGVyX19jaXR5IHNlbGVjdCcpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgIGlmKCAhc2VsZWN0U3RhdGUudmFsKCkgJiYgc2VsZWN0Q2l0eS52YWwoKSl7XG4gICAgICBzZWxlY3RTdGF0ZS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3RTdGF0ZS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gICAgZmlsdGVyU29ydChzZWxlY3RTdGF0ZS52YWwoKSxzZWxlY3RDaXR5LnZhbCgpLHNlbGVjdFR5cGUudmFsKCkpO1xuICB9KTtcbiAgJCgnLnNlbWluYXJlX19zZWFyY2hfX2ZpbHRlcl9fc3RhdGUgc2VsZWN0JykuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgaWYoJCh0aGlzKS52YWwoKSl7XG4gICAgICBmaWx0ZXJWYWx1ZXMuY2l0aWVzID0gW107XG4gICAgICBmaWx0ZXJWYWx1ZXMuY2l0aWVzID0gXy5maWx0ZXIob2JqZWN0cy5jaXRpZXNfZGljdCx7IHN0YXRlX2lkOiBOdW1iZXIoJCh0aGlzKS52YWwoKSl9KTtcbiAgICAgIHNlbGVjdENpdHkuaHRtbCgnPG9wdGlvbj48L29wdGlvbj4nKTtcbiAgICAgIGZpbHRlclZhbHVlcy5jaXRpZXMubWFwKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICB2YXIgb3B0aW9uID0gbmV3IE9wdGlvbihpdGVtLm5hbWUsaXRlbS5pZCk7XG4gICAgICAgIHNlbGVjdENpdHkuYXBwZW5kKG9wdGlvbik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsdGVyVmFsdWVzLmNpdGllcyA9IFtdO1xuICAgICAgZmlsdGVyVmFsdWVzLmNpdGllcyA9IG9iamVjdHMuY2l0aWVzX2RpY3Q7XG4gICAgICBzZWxlY3RDaXR5Lmh0bWwoJzxvcHRpb24+PC9vcHRpb24+Jyk7XG4gICAgICBmaWx0ZXJWYWx1ZXMuY2l0aWVzLm1hcChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgdmFyIG9wdGlvbiA9IG5ldyBPcHRpb24oaXRlbS5uYW1lLGl0ZW0uaWQpO1xuICAgICAgICBzZWxlY3RDaXR5LmFwcGVuZChvcHRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZpbHRlclNvcnQoc2VsZWN0U3RhdGUudmFsKCksc2VsZWN0Q2l0eS52YWwoKSxzZWxlY3RUeXBlLnZhbCgpKTtcbiAgfSk7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsJy5tYXJrZXItaW5mbycsZnVuY3Rpb24oKXtcbiAgICBpZigkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgIH0gZWxzZSB7XG4gICAgICAkKCcubWFya2VyLWluZm8nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgXG4gIH0pO1xuICAkLndoZW4oJC5hamF4KHtcbiAgICB0eXBlOiBcIkdFVFwiLFxuICAgIHVybDogIHVybE1hcCxcbiAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgYXN5bmM6IGZhbHNlLCAvLyDQl9Cw0LHRgNCw0YLQuCDQutC+0LvQuCDQsdGD0LTQtdGIINC90LAg0LHQtdC6LdC10L3QtCDRgdGC0YPQutCw0YLQuNGB0YxcbiAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgIG9iamVjdHMgPSBkYXRhO1xuICAgICAgc2VhcmNoUmVzdWx0ID0gZGF0YS5ldmVudHNfZGljdDtcbiAgICAgIGNvbnNvbGUubG9nKCdnb29kOiAnLGRhdGEpO1xuICAgIH0sXG4gICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yOiAnLF9lcnJvcik7XG4gICAgfVxuICB9KSkuZG9uZShmdW5jdGlvbiAoKSB7XG4gICAgbG9hZFNjcmlwdE1hcCgpOyAvL9Cg0L7Qt9C60L7QvNC10L3RgtGD0LLQsNGC0Lgg0LrQvtC70Lgg0LzQsNC/0LAg0LLQutC70Y7Rh9C10L3QsFxuICAgIGZpbHRlclZhbHVlcy5zdGF0ZXMgPSBvYmplY3RzLnN0YXRlX2RpY3Q7XG4gICAgZmlsdGVyVmFsdWVzLmNpdGllcyA9IG9iamVjdHMuY2l0aWVzX2RpY3Q7XG4gICAgZmlsdGVyVmFsdWVzLmV2ZW50c1R5cGUgPSBvYmplY3RzLmV2ZW50X2NhdGVnb3JpZXM7XG4gICAgXG4gICAgZmlsdGVyVmFsdWVzLnN0YXRlcy5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgICB2YXIgb3B0aW9uID0gbmV3IE9wdGlvbihpdGVtLm5hbWUsaXRlbS5pZCk7XG4gICAgICBzZWxlY3RTdGF0ZS5hcHBlbmQob3B0aW9uKTtcbiAgICB9KTtcbiAgICBmaWx0ZXJWYWx1ZXMuY2l0aWVzLm1hcChmdW5jdGlvbihpdGVtKXtcbiAgICAgIHZhciBvcHRpb24gPSBuZXcgT3B0aW9uKGl0ZW0ubmFtZSxpdGVtLmlkKTtcbiAgICAgIHNlbGVjdENpdHkuYXBwZW5kKG9wdGlvbik7XG4gICAgfSk7XG4gICAgZmlsdGVyVmFsdWVzLmV2ZW50c1R5cGUubWFwKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgdmFyIG9wdGlvbiA9IG5ldyBPcHRpb24oaXRlbS5uYW1lLGl0ZW0uaWQpO1xuICAgICAgc2VsZWN0VHlwZS5hcHBlbmQob3B0aW9uKTtcbiAgICB9KTtcbiAgICBidWlsZFNlYXJjaExpc3QoKTtcblxuICB9KTtcbn0pO1xuXG5cbmZ1bmN0aW9uIGxvYWRTY3JpcHRNYXAoKSB7XG4gIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgc2NyaXB0LmRlZmVyID0gdHJ1ZTtcbiAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgc2NyaXB0LnNyYyA9ICdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PUFJemFTeURmY3M2bVYwWHF5RnFwbzM0R1NBVEtMdGVQcVRnYzBXSSZjYWxsYmFjaz1pbml0TWFwJztcbiAgdmFyIGZpcnN0U2NyaXB0VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICBmaXJzdFNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzY3JpcHQsIGZpcnN0U2NyaXB0VGFnKTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJTb3J0KHN0YXRlLGNpdHksZXZlbnRfdHlwZSl7XG4gIGRlbGV0ZU1hcmtlcnMoKTsgLy/QoNC+0LfQutC+0LzQtdC90YLRg9Cy0LDRgtC4INC60L7Qu9C4INC80LDQv9CwINCy0LrQu9GO0YfQtdC90LBcbiAgdmFyIG9iaiA9IHtcbiAgICBzdGF0ZV9pZDogc3RhdGUgPyBbTnVtYmVyKHN0YXRlKV0gOiBudWxsLFxuICAgIGNpdHlfaWQ6IGNpdHkgPyBbTnVtYmVyKGNpdHkpXSA6IG51bGwsXG4gICAgZXZlbnRfdHlwZV9pZDogZXZlbnRfdHlwZSA/IFtOdW1iZXIoZXZlbnRfdHlwZSldIDogbnVsbCAsXG4gIH07XG4gIFxuICB2YXIgZmluZE9iaiA9IF8ucGlja0J5KG9iaiwgXy5pZGVudGl0eSk7XG4gIHNlYXJjaFJlc3VsdCA9IF8uZmlsdGVyKG9iamVjdHMuZXZlbnRzX2RpY3QsIGZpbmRPYmopO1xuICBidWlsZFNlYXJjaExpc3QoKTtcbiAgY3JlYXRlTWFya2Vyc0dyb3VwKHNlYXJjaFJlc3VsdCk7IC8v0KDQvtC30LrQvtC80LXQvdGC0YPQstCw0YLQuCDQutC+0LvQuCDQvNCw0L/QsCDQstC60LvRjtGH0LXQvdCwXG4gIHNob3dNYXJrZXJzKCk7IC8v0KDQvtC30LrQvtC80LXQvdGC0YPQstCw0YLQuCDQutC+0LvQuCDQvNCw0L/QsCDQstC60LvRjtGH0LXQvdCwXG4gIGNvbnNvbGUubG9nKHNlYXJjaFJlc3VsdC5sZW5ndGgsb2JqZWN0cy5ldmVudHNfZGljdC5sZW5ndGgpO1xuICBpZihzZWFyY2hSZXN1bHQubGVuZ3RoICE9PSBvYmplY3RzLmV2ZW50c19kaWN0Lmxlbmd0aCl7XG4gICAgbWFwLnNldENlbnRlcih7XG4gICAgICBsYXQ6cGFyc2VGbG9hdChzZWFyY2hSZXN1bHRbMF0ubGF0aXR1ZGUpLFxuICAgICAgbG5nOnBhcnNlRmxvYXQoc2VhcmNoUmVzdWx0WzBdLmxvbmdpdHVkZSlcbiAgICB9KTtcbiAgICBtYXAuc2V0Wm9vbSgxNCk7XG4gICAgY29uc29sZS5sb2coJysnKTtcbiAgfWVsc2V7XG4gICAgbWFwLnNldENlbnRlcih7bGF0OiBzdGFydFBvc2l0aW9uLmxhdCwgbG5nOiBzdGFydFBvc2l0aW9uLmxvZ30pO1xuICAgIG1hcC5zZXRab29tKDcpO1xuICAgIGNvbnNvbGUubG9nKCctJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYnVpbGRTZWFyY2hMaXN0KCl7XG4gIHZhciB1bCA9ICQoJy5zZW1pbmFyZV9fc2VhcmNoX19saXN0IHVsJyk7XG4gIHZhciBsaTtcbiAgdWwuaHRtbCgnJyk7XG4gIHNlYXJjaFJlc3VsdC5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIHZhciBzdHJlZXQgPSBpdGVtLnN0cmVldCA/IGl0ZW0uc3RyZWV0IDogJyc7XG4gICAgdmFyIHppcCA9IGl0ZW0uemlwID8gaXRlbS56aXAgOiAnJztcbiAgICB2YXIgY2l0eSA9IGl0ZW0uY2l0eV9pZFsxXSA/IGl0ZW0uY2l0eV9pZFsxXSA6ICcnO1xuICAgIHZhciBkYXRlID0gU3RyaW5nKGl0ZW0uZGF0ZV9iZWdpbikuc3Vic3RyKDAsIDkpLnJlcGxhY2UoJy0nLCcuJykucmVwbGFjZSgnLScsJy4nKTtcbiAgICBkYXRlID0gZGF0ZS5zcGxpdCgnLicpO1xuICAgIGRhdGUgPSBkYXRlLnJldmVyc2UoKTtcbiAgICBkYXRlID0gZGF0ZS5qb2luKCcuJyk7XG4gICAgdmFyIHRpbWVTdGFydCA9IFN0cmluZyhpdGVtLmRhdGVfYmVnaW4pLnJlcGxhY2UoJzonLCcuJykucmVwbGFjZSgnOicsJy4nKS5zdWJzdHIoMTEsMTUpO1xuICAgIHZhciB0aW1lRW5kID0gU3RyaW5nKGl0ZW0uZGF0ZV9lbmQpLnJlcGxhY2UoJzonLCcuJykucmVwbGFjZSgnOicsJy4nKS5zdWJzdHIoMTEsMTUpO1xuICAgIHRpbWVTdGFydCA9IHRpbWVTdGFydC5zdWJzdHIoMCw1KTtcbiAgICB0aW1lRW5kID0gdGltZUVuZC5zdWJzdHIoMCw1KTtcbiAgICAkKGxpKS5odG1sKCc8aDM+JytpdGVtLm5hbWUrJzwvaDM+PGRpdj48cD4nICsgc3RyZWV0ICsgJyAnICsgemlwICsgJyAnICsgY2l0eSArICc8L3A+PGEgY2xhc3M9XCJidXR0b24gYmx1ZVwiIGhyZWY9XCJldmVudC8nICsgaXRlbS5pZCArICdcIj48c3Bhbj5QbGF0eiByZXNlcnZpZXJlbjwvc3Bhbj48L2E+PC9kaXY+PHNwYW4+QW0gJyArIGRhdGUgKyAnIHZvbiAnICsgdGltZVN0YXJ0ICsgJyBiaXMgJyArIHRpbWVFbmQgKyAnIFVocjwvc3Bhbj4nKTtcbiAgICAkKGxpKS5hcHBlbmRUbyh1bCk7XG4gIH0pO1xuICBcbiAgLy8gc2ltcGxlQmFyVWwuZ2V0Q29udGVudEVsZW1lbnQoKTtcbn1cblxuZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgdmFyIGhhaWdodEFzaGJ1cnkgPSB7bGF0OiBzdGFydFBvc2l0aW9uLmxhdCwgbG5nOiBzdGFydFBvc2l0aW9uLmxvZ307XG5cbiAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICB6b29tOiA3LFxuICAgIGNlbnRlcjogaGFpZ2h0QXNoYnVyeSxcbiAgICBtYXBUeXBlSWQ6IHN0YXJ0UG9zaXRpb24udHlwZVxuICB9KTtcbiAgY3JlYXRlTWFya2Vyc0dyb3VwKHNlYXJjaFJlc3VsdCk7XG4gIC8vIG1hcC5hZGRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAvLyAgIGFkZE1hcmtlcihldmVudC5sYXRMbmcpO1xuICAvLyB9KTtcbiAgLy8gYWRkTWFya2VyKGhhaWdodEFzaGJ1cnkpO1xufVxuXG5mdW5jdGlvbiBhZGRNYXJrZXIobG9jYXRpb24sY29udGVudFN0cmluZykge1xuICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICB2YXIgbGF0TG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsbG9jYXRpb24ubG5nKTtcbiAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgIGNlbnRlcjogbGF0TG5nLFxuICAgIHBvc2l0aW9uOiBsYXRMbmcsXG4gICAgbWFwOiBtYXBcbiAgfSk7XG4gIG1hcmtlci5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgdmFyIGluZm93aW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyh7XG4gICAgY29udGVudDogY29udGVudFN0cmluZ1xuICB9KTtcbiAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcbiAgbWFya2Vycy5wdXNoKG1hcmtlcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1hcmtlcnNHcm91cChpdGVtcyl7XG4gIGNvbnNvbGUubG9nKGl0ZW1zKVxuICBpdGVtcy5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgdmFyIHN0cmVldCA9IGl0ZW0uc3RyZWV0ID8gaXRlbS5zdHJlZXQgKyAnICwnIDogJyc7XG4gICAgdmFyIGNpdHkgPSBpdGVtLmNpdHlfaWRbMV0gPyBpdGVtLmNpdHlfaWRbMV0gKyAnICwnIDogJyc7XG4gICAgdmFyIGNvdW50cnkgPSAgaXRlbS5jb3VudHJ5X2lkWzFdID8gaXRlbS5jb3VudHJ5X2lkWzFdIDogJyc7XG4gICAgdmFyIHppcCA9IGl0ZW0uemlwID8gaXRlbS56aXAgOiAnJztcbiAgICB2YXIgY29udGVudFN0cmluZyA9ICc8ZGl2IGNsYXNzPVwibWFya2VyLWluZm9cIj48ZGl2IGNsYXNzPVwibWFya2VyLWluZm8tdGl0bGVcIj48c3Bhbj48L3NwYW4+PGgyPicraXRlbS5jaXR5X2lkWzFdKyc8L2gyPjwvZGl2PjxkaXYgY2xhc3M9XCJtYXJrZXItaW5mby1jb250ZW50XCI+PGEgaHJlZj1cInRlbDoxMjNcIiBjbGFzcz1cInBob25lXCI+MTIzMTIzMTIzMTIzPC9hPjxwIGNsYXNzPVwiYWRkcmVzc1wiPjxzcGFuPicrIHN0cmVldCArJzwvc3Bhbj48c3Bhbj4nKyB6aXAgKycgJysgY2l0eSArJzwvc3Bhbj4gPHNwYW4+JysgY291bnRyeSArJzwvc3Bhbj48L3A+PC9kaXY+IDwvZGl2Pic7XG4gICAgYWRkTWFya2VyKHtcbiAgICAgIGxhdDogaXRlbS5sYXRpdHVkZSwgXG4gICAgICBsbmc6IGl0ZW0ubG9uZ2l0dWRlXG4gICAgfSxjb250ZW50U3RyaW5nKTtcbiAgfSk7IFxufVxuXG5mdW5jdGlvbiBzZXRNYXBPbkFsbChtYXApIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgbWFya2Vyc1tpXS5zZXRNYXAobWFwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGVhck1hcmtlcnMoKSB7XG4gIHNldE1hcE9uQWxsKG51bGwpO1xufVxuXG5mdW5jdGlvbiBzaG93TWFya2VycygpIHtcbiAgc2V0TWFwT25BbGwobWFwKTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlTWFya2VycygpIHtcbiAgY2xlYXJNYXJrZXJzKCk7XG4gIG1hcmtlcnMgPSBbXTtcbn1cblxuXG4vL0N1c3RvbSBNYXJrZXIgSFRNTFxuXG4vLyBmdW5jdGlvbiBDdXN0b21NYXJrZXIobGF0bG5nLCBtYXAsIGFyZ3MpIHtcbi8vIFx0dGhpcy5sYXRsbmcgPSBsYXRsbmc7XHRcbi8vIFx0dGhpcy5hcmdzID0gYXJncztcdFxuLy8gXHR0aGlzLnNldE1hcChtYXApO1x0XG4vLyB9XG5cbi8vIEN1c3RvbU1hcmtlci5wcm90b3R5cGUgPSBuZXcgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcoKTtcblxuLy8gQ3VzdG9tTWFya2VyLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XG5cdFxuLy8gXHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuLy8gXHR2YXIgZGl2ID0gdGhpcy5kaXY7XG5cdFxuLy8gXHRpZiAoIWRpdikge1xuXHRcbi8vIFx0XHRkaXYgPSB0aGlzLmRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFxuLy8gXHRcdGRpdi5jbGFzc05hbWUgPSAnbWFya2VyJztcblx0XHRcbi8vIFx0XHRkaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuLy8gXHRcdGRpdi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4vLyBcdFx0ZGl2LnN0eWxlLndpZHRoID0gJzIwcHgnO1xuLy8gXHRcdGRpdi5zdHlsZS5oZWlnaHQgPSAnMjBweCc7XG4vLyBcdFx0ZGl2LnN0eWxlLmJhY2tncm91bmQgPSAnYmx1ZSc7XG5cdFx0XG4vLyBcdFx0aWYgKHR5cGVvZihzZWxmLmFyZ3MubWFya2VyX2lkKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbi8vIFx0XHRcdGRpdi5kYXRhc2V0Lm1hcmtlcl9pZCA9IHNlbGYuYXJncy5tYXJrZXJfaWQ7XG4vLyBcdFx0fVxuXHRcdFxuLy8gXHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKGRpdiwgXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1x0XHRcdFxuLy8gXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihzZWxmLCBcImNsaWNrXCIpO1xuLy8gXHRcdH0pO1xuXHRcdFxuLy8gXHRcdHZhciBwYW5lcyA9IHRoaXMuZ2V0UGFuZXMoKTtcbi8vIFx0XHRwYW5lcy5vdmVybGF5SW1hZ2UuYXBwZW5kQ2hpbGQoZGl2KTtcbi8vIFx0fVxuXHRcbi8vIFx0dmFyIHBvaW50ID0gdGhpcy5nZXRQcm9qZWN0aW9uKCkuZnJvbUxhdExuZ1RvRGl2UGl4ZWwodGhpcy5sYXRsbmcpO1xuXHRcbi8vIFx0aWYgKHBvaW50KSB7XG4vLyBcdFx0ZGl2LnN0eWxlLmxlZnQgPSBwb2ludC54ICsgJ3B4Jztcbi8vIFx0XHRkaXYuc3R5bGUudG9wID0gcG9pbnQueSArICdweCc7XG4vLyBcdH1cbi8vIH07XG5cbi8vIEN1c3RvbU1hcmtlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4vLyBcdGlmICh0aGlzLmRpdikge1xuLy8gXHRcdHRoaXMuZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kaXYpO1xuLy8gXHRcdHRoaXMuZGl2ID0gbnVsbDtcbi8vIFx0fVx0XG4vLyB9O1xuXG4vLyBDdXN0b21NYXJrZXIucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4vLyBcdHJldHVybiB0aGlzLmxhdGxuZztcdFxuLy8gfTtcblxuXG5cbiIsIkNoYXJ0LnBsdWdpbnMudW5yZWdpc3RlcihDaGFydERhdGFMYWJlbHMpO1xuQ2hhcnQuZGVmYXVsdHMuZ2xvYmFsLmRlZmF1bHRGb250Q29sb3IgPSAnIzI5MjkyOSc7XG5DaGFydC5kZWZhdWx0cy5nbG9iYWwuZGVmYXVsdEZvbnRTaXplID0gMTQ7XG5DaGFydC5kZWZhdWx0cy5nbG9iYWwuZGVmYXVsdEZvbnRGYW1pbHkgPSAnUG9wcGlucy1TZW1pQm9sZCc7XG5cbnZhciBjaGFydHNEYXRhO1xudmFyIHVybENoYXJ0cyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvanNvbi8nO1xuXG5cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgJC53aGVuKGdldEJ1dHRvbkRhdGEodXJsQ2hhcnRzLCcxJykpLmRvbmUoZnVuY3Rpb24oKXtcbiAgICAgICAgaW5pdHNDaGFydHMoY2hhcnRzRGF0YS5sYWJlbCwgY2hhcnRzRGF0YS5jaGFydFswXS5kYXRhMSwgY2hhcnRzRGF0YS5jaGFydFswXS5kYXRhMik7XG4gICAgfSk7XG4gICBcbiAgIFxuICAgIFxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAod2luZG93Lm91dGVyV2lkdGggPD0gOTkxKSB7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgIFxuICAgIHZhciBjaGFydHNCdXR0b25zQ29udGFpbmVyID0gJCgnLmNoYXJ0c19fYnV0dG9ucycpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjaGFydHNEYXRhLnBlcmNlbnRzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IG51bGw7XG4gICAgICAgIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udmFsdWUgPSBjaGFydHNEYXRhLnBlcmNlbnRzW2ldO1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZWQnKTtcbiAgICAgICAgJChidXR0b24pLmh0bWwoJzxzcGFuPicgKyBjaGFydHNEYXRhLnBlcmNlbnRzW2ldICsgJyU8L3NwYW4+Jyk7XG4gICAgICAgICQoYnV0dG9uKS5hcHBlbmRUbyhjaGFydHNCdXR0b25zQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICQoJy5jaGFydHNfX2J1dHRvbnMgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAkLndoZW4oZ2V0QnV0dG9uRGF0YSh1cmxDaGFydHMsICQodGhpcykudmFsKCkpKS5kb25lKGZ1bmN0aW9uKCl7XG4gICAgICAgIGluaXRzQ2hhcnRzKGNoYXJ0c0RhdGEubGFiZWwsIGNoYXJ0c0RhdGEuY2hhcnRbMF0uZGF0YTEsIGNoYXJ0c0RhdGEuY2hhcnRbMF0uZGF0YTIpO1xuICAgICAgIH0pO1xuICAgfSk7XG5cbiAgICQoJy5jaGFydHNfX2Jsb2NrX19pdGVtLm9uZSAuY2hhcnRzX19ibG9ja19faXRlbV9faW5wdXQgaW5wdXQnKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgJC53aGVuKGdldEJ1dHRvbkRhdGEodXJsQ2hhcnRzICArICdjaGFydC1pbnB1dC1vbmUnLCAkKHRoaXMpLnZhbCgpKSkuZG9uZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgaW5pdHNDaGFydHMoY2hhcnRzRGF0YS5sYWJlbCwgY2hhcnRzRGF0YS5jaGFydFswXS5kYXRhMSwgY2hhcnRzRGF0YS5jaGFydFswXS5kYXRhMik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAkKCcuY2hhcnRzX19ibG9ja19faXRlbS50d28gLmNoYXJ0c19fYmxvY2tfX2l0ZW1fX2lucHV0IGlucHV0JykuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgICAgICQud2hlbihnZXRCdXR0b25EYXRhKHVybENoYXJ0cyArICdjaGFydC1pbnB1dC10d28nLCAkKHRoaXMpLnZhbCgpKSkuZG9uZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgaW5pdHNDaGFydHMoY2hhcnRzRGF0YS5sYWJlbCwgY2hhcnRzRGF0YS5jaGFydFswXS5kYXRhMSwgY2hhcnRzRGF0YS5jaGFydFswXS5kYXRhMik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgXG59KTtcblxuZnVuY3Rpb24gZ2V0QnV0dG9uRGF0YSh1cmwsIHZhbHVlKSB7XG5cbiAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgdXJsOiB1cmwgKyB2YWx1ZSArICcuanNvbicsXG4gICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgLy8gZGF0YTonLycgKyB2YWx1ZSArICcuanNvbicsXG4gICAgICAgIGFzeW5jOiBmYWxzZSwgLy8g0JfQsNCx0YDQsNGC0Lgg0LrQvtC70Lgg0LHRg9C00LXRiCDQvdCwINCx0LXQui3QtdC90LQg0YHRgtGD0LrQsNGC0LjRgdGMXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgY2hhcnRzRGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFydHNEYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOiAnLCBfZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRzQ2hhcnRzKCBsYWJlbHMsIGRhdGExLCBkYXRhMiApe1xuICAgIHZhciBjdHhPbmU7XG4gICAgdmFyIGN0eFR3bztcbiAgICB2YXIgbXlDaGFydE9uZTtcbiAgICB2YXIgbXlDaGFydFR3bztcbiAgICB2YXIgZGF0YU9uZTtcbiAgICB2YXIgZGF0YVR3bztcbiAgICB2YXIgc2V0T3B0aW9ucztcbiAgICB2YXIgY2hhcnRDb250YWluZXJPbmU7XG4gICAgdmFyIGNoYXJ0Q29udGFpbmVyVHdvO1xuXG4gICAgc2V0T3B0aW9ucyA9IHtcbiAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgICBwYWRkaW5nOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogMjAsXG4gICAgICAgICAgICAgICAgdG9wOjMwLFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHBsdWdpbnM6IHtcbiAgICAgICAgICAgIGRhdGFsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJyMyOTI5MjknLFxuICAgICAgICAgICAgICAgIGFuY2hvcjogJ2VuZCcsXG4gICAgICAgICAgICAgICAgYWxpZ246ICd0b3AnLFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSArICcg4oKsJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgeUF4ZXM6IFt7XG4gICAgICAgICAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgICAgICAgICAgYmVnaW5BdFplcm86IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSArICcg4oKsJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBpZihkYXRhMSl7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhcnRzX19ibG9ja19faXRlbS5vbmUgLmNoYXJ0c19fYmxvY2tfX2l0ZW1fX2NoYXJ0XCIpLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGNoYXJ0Q29udGFpbmVyT25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNoYXJ0Q29udGFpbmVyT25lLmlkID0gJ215Q2hhcnRPbmUnO1xuICAgICAgICBjaGFydENvbnRhaW5lck9uZS5oZWlnaHQgPSBcIjI1MFwiO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYXJ0c19fYmxvY2tfX2l0ZW0ub25lIC5jaGFydHNfX2Jsb2NrX19pdGVtX19jaGFydFwiKS5hcHBlbmRDaGlsZChjaGFydENvbnRhaW5lck9uZSk7XG4gICAgICAgIGN0eE9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlDaGFydE9uZVwiKS5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBkYXRhT25lID0ge1xuICAgICAgICAgICAgbGFiZWxzOiBsYWJlbHMgfHwgY2hhcnRzRGF0YS5sYWJlbCxcbiAgICAgICAgICAgIGRhdGFzZXRzOiBbe1xuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGExIHx8IGNoYXJ0c0RhdGEuY2hhcnRbMF0uZGF0YTEsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzQ0YWNkNycsXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjNDRhY2Q3JyxcbiAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICAgICAgbXlDaGFydE9uZSA9IG5ldyBDaGFydChjdHhPbmUsIHtcbiAgICAgICAgICAgIHR5cGU6ICdiYXInLFxuICAgICAgICAgICAgZGF0YTogZGF0YU9uZSxcbiAgICAgICAgICAgIHBsdWdpbnM6IFtDaGFydERhdGFMYWJlbHNdLFxuICAgICAgICAgICAgb3B0aW9uczogc2V0T3B0aW9uc1xuICAgICAgICB9KTsgIFxuICAgIH1cblxuICAgIGlmKGRhdGEyKXtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFydHNfX2Jsb2NrX19pdGVtLnR3byAuY2hhcnRzX19ibG9ja19faXRlbV9fY2hhcnRcIikuaW5uZXJIVE1MID0gXCJcIjsgIFxuICAgICAgICBjaGFydENvbnRhaW5lclR3byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjaGFydENvbnRhaW5lclR3by5pZCA9ICdteUNoYXJ0VHdvJztcbiAgICAgICAgY2hhcnRDb250YWluZXJUd28uaGVpZ2h0ID0gXCIyNTBcIjtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFydHNfX2Jsb2NrX19pdGVtLnR3byAuY2hhcnRzX19ibG9ja19faXRlbV9fY2hhcnRcIikuYXBwZW5kQ2hpbGQoY2hhcnRDb250YWluZXJUd28pO1xuICAgICAgICBjdHhUd28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15Q2hhcnRUd29cIikuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgZGF0YVR3byA9IHtcbiAgICAgICAgICAgIGxhYmVsczogbGFiZWxzIHx8ICBjaGFydHNEYXRhLmxhYmVsLFxuICAgICAgICAgICAgZGF0YXNldHM6IFt7XG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YTIgfHwgY2hhcnRzRGF0YS5jaGFydFswXS5kYXRhMixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNDRhY2Q3JyxcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogJyM0NGFjZDcnLFxuICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAxXG4gICAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgICAgICBteUNoYXJ0VHdvID0gbmV3IENoYXJ0KGN0eFR3bywge1xuICAgICAgICAgICAgdHlwZTogJ2JhcicsXG4gICAgICAgICAgICBkYXRhOiBkYXRhVHdvLFxuICAgICAgICAgICAgcGx1Z2luczogW0NoYXJ0RGF0YUxhYmVsc10sXG4gICAgICAgICAgICBvcHRpb25zOiBzZXRPcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbn0iXX0=
