function a(){var e=$("header.header").outerHeight();$("section.webinar-info").css("min-height","calc(100vh - "+e+"px)")}function n(){var e,t,i=$(".webinar-info h2"),a=i.css("marginBottom");$(i[0]).outerHeight()<=$(i[1]).outerHeight()?($(i[0]).css("marginBottom",a),e=$(i[0]).outerHeight(),t=$(i[1]).outerHeight()-e,$(i[0]).css("marginBottom",parseFloat($(i[0]).css("marginBottom"))+t+"px")):($(i[1]).css("marginBottom",a),e=$(i[1]).outerHeight(),t=$(i[0]).outerHeight()-e,$(i[1]).css("marginBottom",parseFloat($(i[1]).css("marginBottom"))+t+"px"))}function s(){var e=$("body").outerWidth(),t=$(".seminare-and-map .map").offset().left,i=$(".seminare-and-map .seminare").outerWidth(),a=parseFloat($(".seminare-and-map .container").css("paddingLeft")),n=parseFloat($(".seminare-and-map .container").outerHeight());$(".seminare-and-map .map").css({width:e-t+"px",left:i+a+"px",height:n+"px"})}function o(){var e=parseFloat($(".new-properties__item__text p").css("lineHeight")),t=$(".new-properties__item__text h3"),i=$(".new-properties__item__location div"),a=0,n=0;i.map(function(){$(this).outerHeight()>=a&&(a=$(this).outerHeight())}),t.map(function(){$(this).height()>=n&&(n=$(this).height())}),i.css("height",a+"px"),t.css("height",n+"px"),$(".new-properties__item__text p").css("height",2*e+"px")}function e(){var e=$(".header__bottom__nav"),t=$(".header__mid__contacts__phones"),i=e.children("ul"),a=$(".header__top .social"),n=$(".header__top .log-or-reg");"absolute"===e.css("position")&&(i.wrap('<div class="container"></div>'),t.appendTo(e.children(".container")),a.appendTo(e.children(".container")),n.appendTo(e.children(".container")))}$(function(){e(),setTimeout(function(){var e,t,i;a(),n(),s(),o(),e=$(".object-fit-simulation"),t=e.find("img"),i=t.attr("src"),t.css("display","none"),e.css({background:"url("+i+") no-repeat center / cover"})},111),$(window).scroll(function(){}),$(window).resize(function(){a(),n(),s(),o(),e()}),$(".menu-button").click(function(){$(this).toggleClass("is-active"),$(".header__bottom__nav").toggleClass("active")})}),window.initMap=function(){var e={lat:t.lat,lng:t.log};l=new google.maps.Map(document.getElementById("map"),{zoom:7,center:e,mapTypeId:t.type}),g(p)};var l,t,r,p,i,c,d,m=[],h={states:[],cities:[],eventsType:[]};function u(e,t,i){f(null),m=[];var a={state_id:e?[Number(e)]:null,city_id:t?[Number(t)]:null,event_type_id:i?[Number(i)]:null},n=_.pickBy(a,_.identity);p=_.filter(r.events_dict,n),v(),g(p),f(l)}function v(){var r,c=$(".seminare__search__list ul");c.html(""),p.map(function(e){r=document.createElement("li");var t=e.street?e.street:"",i=e.zip?e.zip:"",a=e.city_id[1]?e.city_id[1]:"",n=String(e.date_begin).substr(0,9).replace("-",".").replace("-",".");n=(n=(n=n.split(".")).reverse()).join(".");var s=String(e.date_begin).replace(":",".").replace(":",".").substr(11,15),o=String(e.date_end).replace(":",".").replace(":",".").substr(11,15);s=s.substr(0,5),o=o.substr(0,5),$(r).html("<h3>"+e.name+"</h3><div><p>"+t+" "+i+" "+a+'</p><a class="button blue" href="event/'+e.id+'"><span>Platz reservieren</span></a></div><span>Am '+n+" von "+s+" bis "+o+" Uhr</span>"),$(r).appendTo(c)})}function g(e){e.map(function(e){console.log(e);var t,i,a,n=e.street?e.street+" ,":"",s=e.city_id[1]?e.city_id[1]+" ,":"",o=e.country_id[1]?e.country_id[1]:"",r=e.zip?e.zip:"",c='<div class="marker-info"><div class="marker-info-title"><span></span><h2>'+e.city_id[1]+'</h2></div><div class="marker-info-content"><a href="tel:123" class="phone">123123123123</a><p class="address"><span>'+n+"</span><span>"+r+" "+s+"</span> <span>"+o+"</span></p></div> </div>";t={lat:e.latitude,lng:e.longitude},i=c,(a=new google.maps.Marker({position:t,map:l})).setVisible(!1),new google.maps.InfoWindow({content:i}).open(l,a),m.push(a)})}function f(e){for(var t=0;t<m.length;t++)m[t].setMap(e)}$(document).ready(function(){t={lat:$("#latitude").val()||50.9913249,log:$("#longitude").val()||9.4721966,type:$("#template_type").val()||"terrain"},i=$(".seminare__search__filter__state select"),c=$(".seminare__search__filter__city select"),d=$(".seminare__search__filter__type select"),i.select2({placeholder:"Select a state",allowClear:!0}),c.select2({placeholder:"Select a city",allowClear:!0}),d.select2({placeholder:"Select a event type",allowClear:!0}),$(".select2-selection__clear").click(function(){u(i.val(),c.val(),d.val())}),$(".seminare__search__filter select").change(function(){u(i.val(),c.val(),d.val())}),$(".seminare__search__filter__city select").change(function(){!i.val()&&c.val()?i.prop("disabled",!0):i.prop("disabled",!1),u(i.val(),c.val(),d.val())}),$(".seminare__search__filter__state select").change(function(){$(this).val()?(h.cities=[],h.cities=_.filter(r.cities_dict,{state_id:Number($(this).val())}),c.html("<option></option>"),h.cities.map(function(e){var t=new Option(e.name,e.id);c.append(t)})):(h.cities=[],h.cities=r.cities_dict,c.html("<option></option>"),h.cities.map(function(e){var t=new Option(e.name,e.id);c.append(t)})),u(i.val(),c.val(),d.val())}),$(document).on("click",".marker-info",function(){$(this).hasClass("active")?$(this).removeClass("active"):($(".marker-info").removeClass("active"),$(this).addClass("active"))}),$.when($.ajax({type:"GET",url:"http://localhost:3000/json/data.json",dataType:"json",async:!1,success:function(e){p=(r=e).events_dict,console.log("good: ",r)},error:function(e){console.log("error: ",e)}})).done(function(){!function(){var e=document.createElement("script");e.async=!0,e.defer=!0,e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDfcs6mV0XqyFqpo34GSATKLtePqTgc0WI&callback=initMap";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),document.body.appendChild(e)}(),h.states=r.state_dict,h.cities=r.cities_dict,h.eventsType=r.event_categories,h.states.map(function(e){var t=new Option(e.name,e.id);i.append(t)}),h.cities.map(function(e){var t=new Option(e.name,e.id);c.append(t)}),h.eventsType.map(function(e){var t=new Option(e.name,e.id);d.append(t)}),v()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJtYXAuanMiXSwibmFtZXMiOlsiaGVhZGVySGVpZ2h0IiwiaGVpZ2h0IiwiJCIsIm91dGVySGVpZ2h0IiwiY3NzIiwidGl0bGVBbGlnbiIsIm1pbiIsIml0ZW1zIiwiZGVmYXVsdE1hcmdpbiIsInBhcnNlRmxvYXQiLCJtYXBXaWR0aCIsIndpbmRvd1dpZHRoIiwib3V0ZXJXaWR0aCIsIm1hcE9mZnNldCIsIm9mZnNldCIsImxlZnQiLCJzZW1pbmFyV0lkdGgiLCJjb250YWluZXJQYWRkaW5nIiwiY29udGFpbmVySGVpZ2h0Iiwid2lkdGgiLCJuZXdQcm9wZXJ0aWVzSXRlbUhlaWdodCIsIml0ZW1zTGluZUhlaWdodCIsIml0ZW1zVGV4dFRpdGxlIiwiaXRlbXNMb2NhdGlvbkhlaWdodCIsIm1heEhlaWdodDEiLCJtYXhIZWlnaHQyIiwibWFwIiwidGhpcyIsIm1vYmlsZU5hdmlnYXRpb24iLCJuYXYiLCJwaG9uZXMiLCJ1bCIsImNoaWxkcmVuIiwic29jaWFsIiwibG9nT3JSZWciLCJ3cmFwIiwiYXBwZW5kVG8iLCJzZXRUaW1lb3V0Iiwic2ltdWxhdG9yIiwiaW1nIiwiaW1nU3JjIiwiZmluZCIsImF0dHIiLCJiYWNrZ3JvdW5kIiwid2luZG93Iiwic2Nyb2xsIiwicmVzaXplIiwiY2xpY2siLCJ0b2dnbGVDbGFzcyIsImluaXRNYXAiLCJoYWlnaHRBc2hidXJ5IiwibGF0Iiwic3RhcnRQb3NpdGlvbiIsImxuZyIsImxvZyIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiem9vbSIsImNlbnRlciIsIm1hcFR5cGVJZCIsInR5cGUiLCJjcmVhdGVNYXJrZXJzR3JvdXAiLCJzZWFyY2hSZXN1bHQiLCJvYmplY3RzIiwic2VsZWN0U3RhdGUiLCJzZWxlY3RDaXR5Iiwic2VsZWN0VHlwZSIsIm1hcmtlcnMiLCJmaWx0ZXJWYWx1ZXMiLCJzdGF0ZXMiLCJjaXRpZXMiLCJldmVudHNUeXBlIiwiZmlsdGVyU29ydCIsInN0YXRlIiwiY2l0eSIsImV2ZW50X3R5cGUiLCJzZXRNYXBPbkFsbCIsIm9iaiIsInN0YXRlX2lkIiwiTnVtYmVyIiwiY2l0eV9pZCIsImV2ZW50X3R5cGVfaWQiLCJmaW5kT2JqIiwiXyIsInBpY2tCeSIsImlkZW50aXR5IiwiZmlsdGVyIiwiZXZlbnRzX2RpY3QiLCJidWlsZFNlYXJjaExpc3QiLCJsaSIsImh0bWwiLCJpdGVtIiwiY3JlYXRlRWxlbWVudCIsInN0cmVldCIsInppcCIsImRhdGUiLCJTdHJpbmciLCJkYXRlX2JlZ2luIiwic3Vic3RyIiwicmVwbGFjZSIsInNwbGl0IiwicmV2ZXJzZSIsImpvaW4iLCJ0aW1lU3RhcnQiLCJ0aW1lRW5kIiwiZGF0ZV9lbmQiLCJuYW1lIiwiaWQiLCJjb25zb2xlIiwibG9jYXRpb24iLCJjb250ZW50U3RyaW5nIiwibWFya2VyIiwiY291bnRyeSIsImNvdW50cnlfaWQiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIk1hcmtlciIsInBvc2l0aW9uIiwic2V0VmlzaWJsZSIsIkluZm9XaW5kb3ciLCJjb250ZW50Iiwib3BlbiIsInB1c2giLCJpIiwibGVuZ3RoIiwic2V0TWFwIiwicmVhZHkiLCJ2YWwiLCJzZWxlY3QyIiwicGxhY2Vob2xkZXIiLCJhbGxvd0NsZWFyIiwiY2hhbmdlIiwicHJvcCIsImNpdGllc19kaWN0Iiwib3B0aW9uIiwiT3B0aW9uIiwiYXBwZW5kIiwib24iLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ3aGVuIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiYXN5bmMiLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwiX2Vycm9yIiwiZG9uZSIsInNjcmlwdCIsImRlZmVyIiwic3JjIiwiZmlyc3RTY3JpcHRUYWciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJsb2FkU2NyaXB0TWFwIiwic3RhdGVfZGljdCIsImV2ZW50X2NhdGVnb3JpZXMiXSwibWFwcGluZ3MiOiJBQXNDQSxTQUFBQSxJQUNBLElBQUFDLEVBQUFDLEVBQUEsaUJBQUFDLGNBQ0FELEVBQUEsd0JBQUFFLElBQUEsYUFBQSxnQkFBQUgsRUFBQSxPQUlBLFNBQUFJLElBQ0EsSUFHQUMsRUFDQUwsRUFKQU0sRUFBQUwsRUFBQSxvQkFDQU0sRUFBQUQsRUFBQUgsSUFBQSxnQkFJQUYsRUFBQUssRUFBQSxJQUFBSixlQUFBRCxFQUFBSyxFQUFBLElBQUFKLGVBQ0FELEVBQUFLLEVBQUEsSUFBQUgsSUFDQSxlQUNBSSxHQUVBRixFQUFBSixFQUFBSyxFQUFBLElBQUFKLGNBRUFGLEVBREFDLEVBQUFLLEVBQUEsSUFBQUosY0FDQUcsRUFDQUosRUFBQUssRUFBQSxJQUFBSCxJQUNBLGVBQ0FLLFdBQUFQLEVBQUFLLEVBQUEsSUFBQUgsSUFBQSxpQkFBQUgsRUFBQSxRQUdBQyxFQUFBSyxFQUFBLElBQUFILElBQ0EsZUFDQUksR0FFQUYsRUFBQUosRUFBQUssRUFBQSxJQUFBSixjQUVBRixFQURBQyxFQUFBSyxFQUFBLElBQUFKLGNBQ0FHLEVBQ0FKLEVBQUFLLEVBQUEsSUFBQUgsSUFDQSxlQUNBSyxXQUFBUCxFQUFBSyxFQUFBLElBQUFILElBQUEsaUJBQUFILEVBQUEsT0FNQSxTQUFBUyxJQUNBLElBQUFDLEVBQUFULEVBQUEsUUFBQVUsYUFDQUMsRUFBQVgsRUFBQSwwQkFBQVksU0FBQUMsS0FDQUMsRUFBQWQsRUFBQSwrQkFBQVUsYUFDQUssRUFBQVIsV0FBQVAsRUFBQSxnQ0FBQUUsSUFBQSxnQkFDQWMsRUFBQVQsV0FBQVAsRUFBQSxnQ0FBQUMsZUFDQUQsRUFBQSwwQkFBQUUsSUFBQSxDQUNBZSxNQUFBUixFQUFBRSxFQUFBLEtBQ0FFLEtBQUFDLEVBQUFDLEVBQUEsS0FDQWhCLE9BQUFpQixFQUFBLE9BS0EsU0FBQUUsSUFDQSxJQUFBQyxFQUFBWixXQUFBUCxFQUFBLGlDQUFBRSxJQUFBLGVBQ0FrQixFQUFBcEIsRUFBQSxrQ0FDQXFCLEVBQUFyQixFQUFBLHVDQUNBc0IsRUFBQSxFQUNBQyxFQUFBLEVBQ0FGLEVBQUFHLElBQUEsV0FDQXhCLEVBQUF5QixNQUFBeEIsZUFBQXFCLElBQ0FBLEVBQUF0QixFQUFBeUIsTUFBQXhCLGlCQUdBbUIsRUFBQUksSUFBQSxXQUNBeEIsRUFBQXlCLE1BQUExQixVQUFBd0IsSUFDQUEsRUFBQXZCLEVBQUF5QixNQUFBMUIsWUFHQXNCLEVBQUFuQixJQUFBLFNBQUFvQixFQUFBLE1BQ0FGLEVBQUFsQixJQUFBLFNBQUFxQixFQUFBLE1BQ0F2QixFQUFBLGlDQUFBRSxJQUFBLFNBQUEsRUFBQWlCLEVBQUEsTUFHQSxTQUFBTyxJQUNBLElBQUFDLEVBQUEzQixFQUFBLHdCQUNBNEIsRUFBQTVCLEVBQUEsa0NBQ0E2QixFQUFBRixFQUFBRyxTQUFBLE1BQ0FDLEVBQUEvQixFQUFBLHdCQUNBZ0MsRUFBQWhDLEVBQUEsNEJBQ0EsYUFBQTJCLEVBQUF6QixJQUFBLGNBQ0EyQixFQUFBSSxLQUFBLGlDQUNBTCxFQUFBTSxTQUFBUCxFQUFBRyxTQUFBLGVBQ0FDLEVBQUFHLFNBQUFQLEVBQUFHLFNBQUEsZUFDQUUsRUFBQUUsU0FBQVAsRUFBQUcsU0FBQSxnQkEzSEE5QixFQUFBLFdBRUEwQixJQUVBUyxXQUFBLFdBd0JBLElBQ0FDLEVBQ0FDLEVBQ0FDLEVBMUJBeEMsSUFDQUssSUFDQUssSUFDQVUsSUFxQkFrQixFQUFBcEMsRUFBQSwwQkFDQXFDLEVBQUFELEVBQUFHLEtBQUEsT0FDQUQsRUFBQUQsRUFBQUcsS0FBQSxPQUNBSCxFQUFBbkMsSUFBQSxVQUFBLFFBQ0FrQyxFQUFBbEMsSUFBQSxDQUNBdUMsV0FBQSxPQUFBSCxFQUFBLGdDQXhCQSxLQUVBdEMsRUFBQTBDLFFBQUFDLE9BQUEsY0FFQTNDLEVBQUEwQyxRQUFBRSxPQUFBLFdBQ0E5QyxJQUNBSyxJQUNBSyxJQUNBVSxJQUNBUSxNQUVBMUIsRUFBQSxnQkFBQTZDLE1BQUEsV0FDQTdDLEVBQUF5QixNQUFBcUIsWUFBQSxhQUNBOUMsRUFBQSx3QkFBQThDLFlBQUEsY0NsQkFKLE9BQUFLLFFBa0xBLFdBQ0EsSUFBQUMsRUFBQSxDQUFBQyxJQUFBQyxFQUFBRCxJQUFBRSxJQUFBRCxFQUFBRSxLQUVBNUIsRUFBQSxJQUFBNkIsT0FBQUMsS0FBQUMsSUFBQUMsU0FBQUMsZUFBQSxPQUFBLENBQ0FDLEtBQUEsRUFDQUMsT0FBQVgsRUFDQVksVUFBQVYsRUFBQVcsT0FFQUMsRUFBQUMsSUF6TEEsSUFDQXZDLEVBRUEwQixFQUNBYyxFQUNBRCxFQVdBRSxFQUNBQyxFQUNBQyxFQWhCQUMsRUFBQSxHQVFBQyxFQUFBLENBQ0FDLE9BQUEsR0FDQUMsT0FBQSxHQUNBQyxXQUFBLElBNkhBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBeUZBQyxFQUFBLE1BU0FULEVBQUEsR0FoR0EsSUFBQVUsRUFBQSxDQUNBQyxTQUFBTCxFQUFBLENBQUFNLE9BQUFOLElBQUEsS0FDQU8sUUFBQU4sRUFBQSxDQUFBSyxPQUFBTCxJQUFBLEtBQ0FPLGNBQUFOLEVBQUEsQ0FBQUksT0FBQUosSUFBQSxNQUdBTyxFQUFBQyxFQUFBQyxPQUFBUCxFQUFBTSxFQUFBRSxVQUNBdkIsRUFBQXFCLEVBQUFHLE9BQUF2QixFQUFBd0IsWUFBQUwsR0FDQU0sSUFDQTNCLEVBQUFDLEdBa0ZBYyxFQUFBckQsR0E5RUEsU0FBQWlFLElBQ0EsSUFDQUMsRUFEQTdELEVBQUE3QixFQUFBLDhCQUVBNkIsRUFBQThELEtBQUEsSUFDQTVCLEVBQUF2QyxJQUFBLFNBQUFvRSxHQUNBRixFQUFBbEMsU0FBQXFDLGNBQUEsTUFDQSxJQUFBQyxFQUFBRixFQUFBRSxPQUFBRixFQUFBRSxPQUFBLEdBQ0FDLEVBQUFILEVBQUFHLElBQUFILEVBQUFHLElBQUEsR0FDQXBCLEVBQUFpQixFQUFBWCxRQUFBLEdBQUFXLEVBQUFYLFFBQUEsR0FBQSxHQUNBZSxFQUFBQyxPQUFBTCxFQUFBTSxZQUFBQyxPQUFBLEVBQUEsR0FBQUMsUUFBQSxJQUFBLEtBQUFBLFFBQUEsSUFBQSxLQUdBSixHQURBQSxHQURBQSxFQUFBQSxFQUFBSyxNQUFBLE1BQ0FDLFdBQ0FDLEtBQUEsS0FDQSxJQUFBQyxFQUFBUCxPQUFBTCxFQUFBTSxZQUFBRSxRQUFBLElBQUEsS0FBQUEsUUFBQSxJQUFBLEtBQUFELE9BQUEsR0FBQSxJQUNBTSxFQUFBUixPQUFBTCxFQUFBYyxVQUFBTixRQUFBLElBQUEsS0FBQUEsUUFBQSxJQUFBLEtBQUFELE9BQUEsR0FBQSxJQUNBSyxFQUFBQSxFQUFBTCxPQUFBLEVBQUEsR0FDQU0sRUFBQUEsRUFBQU4sT0FBQSxFQUFBLEdBQ0FuRyxFQUFBMEYsR0FBQUMsS0FBQSxPQUFBQyxFQUFBZSxLQUFBLGdCQUFBYixFQUFBLElBQUFDLEVBQUEsSUFBQXBCLEVBQUEsMENBQUFpQixFQUFBZ0IsR0FBQSxzREFBQVosRUFBQSxRQUFBUSxFQUFBLFFBQUFDLEVBQUEsZUFDQXpHLEVBQUEwRixHQUFBeEQsU0FBQUwsS0FrQ0EsU0FBQWlDLEVBQUF6RCxHQUNBQSxFQUFBbUIsSUFBQSxTQUFBb0UsR0FDQWlCLFFBQUF6RCxJQUFBd0MsR0FDQSxJQWhCQWtCLEVBQUFDLEVBQ0FDLEVBZUFsQixFQUFBRixFQUFBRSxPQUFBRixFQUFBRSxPQUFBLEtBQUEsR0FDQW5CLEVBQUFpQixFQUFBWCxRQUFBLEdBQUFXLEVBQUFYLFFBQUEsR0FBQSxLQUFBLEdBQ0FnQyxFQUFBckIsRUFBQXNCLFdBQUEsR0FBQXRCLEVBQUFzQixXQUFBLEdBQUEsR0FDQW5CLEVBQUFILEVBQUFHLElBQUFILEVBQUFHLElBQUEsR0FDQWdCLEVBQUEsNEVBQUFuQixFQUFBWCxRQUFBLEdBQUEsd0hBQUFhLEVBQUEsZ0JBQUFDLEVBQUEsSUFBQXBCLEVBQUEsaUJBQUFzQyxFQUFBLDJCQXBCQUgsRUFxQkEsQ0FDQTdELElBQUEyQyxFQUFBdUIsU0FDQWhFLElBQUF5QyxFQUFBd0IsV0F2QkFMLEVBd0JBQSxHQXZCQUMsRUFBQSxJQUFBM0QsT0FBQUMsS0FBQStELE9BQUEsQ0FDQUMsU0FBQVIsRUFDQXRGLElBQUFBLEtBRUErRixZQUFBLEdBQ0EsSUFBQWxFLE9BQUFDLEtBQUFrRSxXQUFBLENBQ0FDLFFBQUFWLElBRUFXLEtBQUFsRyxFQUFBd0YsR0FDQTVDLEVBQUF1RCxLQUFBWCxLQWtCQSxTQUFBbkMsRUFBQXJELEdBQ0EsSUFBQSxJQUFBb0csRUFBQSxFQUFBQSxFQUFBeEQsRUFBQXlELE9BQUFELElBQ0F4RCxFQUFBd0QsR0FBQUUsT0FBQXRHLEdBMU1BeEIsRUFBQXdELFVBQUF1RSxNQUFBLFdBQ0E3RSxFQUFBLENBQ0FELElBQUFqRCxFQUFBLGFBQUFnSSxPQUFBLFdBQ0E1RSxJQUFBcEQsRUFBQSxjQUFBZ0ksT0FBQSxVQUNBbkUsS0FBQTdELEVBQUEsa0JBQUFnSSxPQUFBLFdBSUEvRCxFQUFBakUsRUFBQSwyQ0FDQWtFLEVBQUFsRSxFQUFBLDBDQUNBbUUsRUFBQW5FLEVBQUEsMENBRUFpRSxFQUFBZ0UsUUFBQSxDQUNBQyxZQUFBLGlCQUNBQyxZQUFBLElBRUFqRSxFQUFBK0QsUUFBQSxDQUNBQyxZQUFBLGdCQUNBQyxZQUFBLElBRUFoRSxFQUFBOEQsUUFBQSxDQUNBQyxZQUFBLHNCQUNBQyxZQUFBLElBSUFuSSxFQUFBLDZCQUFBNkMsTUFBQSxXQUNBNEIsRUFBQVIsRUFBQStELE1BQUE5RCxFQUFBOEQsTUFBQTdELEVBQUE2RCxTQUdBaEksRUFBQSxvQ0FBQW9JLE9BQUEsV0FDQTNELEVBQUFSLEVBQUErRCxNQUFBOUQsRUFBQThELE1BQUE3RCxFQUFBNkQsU0FFQWhJLEVBQUEsMENBQUFvSSxPQUFBLFlBQ0FuRSxFQUFBK0QsT0FBQTlELEVBQUE4RCxNQUNBL0QsRUFBQW9FLEtBQUEsWUFBQSxHQUVBcEUsRUFBQW9FLEtBQUEsWUFBQSxHQUVBNUQsRUFBQVIsRUFBQStELE1BQUE5RCxFQUFBOEQsTUFBQTdELEVBQUE2RCxTQUVBaEksRUFBQSwyQ0FBQW9JLE9BQUEsV0FDQXBJLEVBQUF5QixNQUFBdUcsT0FDQTNELEVBQUFFLE9BQUEsR0FDQUYsRUFBQUUsT0FBQWEsRUFBQUcsT0FBQXZCLEVBQUFzRSxZQUFBLENBQUF2RCxTQUFBQyxPQUFBaEYsRUFBQXlCLE1BQUF1RyxTQUNBOUQsRUFBQXlCLEtBQUEscUJBQ0F0QixFQUFBRSxPQUFBL0MsSUFBQSxTQUFBb0UsR0FDQSxJQUFBMkMsRUFBQSxJQUFBQyxPQUFBNUMsRUFBQWUsS0FBQWYsRUFBQWdCLElBQ0ExQyxFQUFBdUUsT0FBQUYsT0FHQWxFLEVBQUFFLE9BQUEsR0FDQUYsRUFBQUUsT0FBQVAsRUFBQXNFLFlBQ0FwRSxFQUFBeUIsS0FBQSxxQkFDQXRCLEVBQUFFLE9BQUEvQyxJQUFBLFNBQUFvRSxHQUNBLElBQUEyQyxFQUFBLElBQUFDLE9BQUE1QyxFQUFBZSxLQUFBZixFQUFBZ0IsSUFDQTFDLEVBQUF1RSxPQUFBRixNQUdBOUQsRUFBQVIsRUFBQStELE1BQUE5RCxFQUFBOEQsTUFBQTdELEVBQUE2RCxTQUVBaEksRUFBQXdELFVBQUFrRixHQUFBLFFBQUEsZUFBQSxXQUNBMUksRUFBQXlCLE1BQUFrSCxTQUFBLFVBQ0EzSSxFQUFBeUIsTUFBQW1ILFlBQUEsV0FFQTVJLEVBQUEsZ0JBQUE0SSxZQUFBLFVBQ0E1SSxFQUFBeUIsTUFBQW9ILFNBQUEsYUFJQTdJLEVBQUE4SSxLQUFBOUksRUFBQStJLEtBQUEsQ0FDQWxGLEtBQUEsTUFDQW1GLElBNUZBLHVDQTZGQUMsU0FBQSxPQUNBQyxPQUFBLEVBQ0FDLFFBQUEsU0FBQUMsR0FFQXJGLEdBREFDLEVBQUFvRixHQUNBNUQsWUFDQXFCLFFBQUF6RCxJQUFBLFNBQUFZLElBRUFxRixNQUFBLFNBQUFDLEdBQ0F6QyxRQUFBekQsSUFBQSxVQUFBa0csT0FFQUMsS0FBQSxZQXdCQSxXQUNBLElBQUFDLEVBQUFoRyxTQUFBcUMsY0FBQSxVQUNBMkQsRUFBQU4sT0FBQSxFQUNBTSxFQUFBQyxPQUFBLEVBQ0FELEVBQUEzRixLQUFBLGtCQUNBMkYsRUFBQUUsSUFBQSx1R0FDQSxJQUFBQyxFQUFBbkcsU0FBQW9HLHFCQUFBLFVBQUEsR0FDQUQsRUFBQUUsV0FBQUMsYUFBQU4sRUFBQUcsR0FDQW5HLFNBQUF1RyxLQUFBQyxZQUFBUixHQS9CQVMsR0FDQTVGLEVBQUFDLE9BQUFOLEVBQUFrRyxXQUNBN0YsRUFBQUUsT0FBQVAsRUFBQXNFLFlBQ0FqRSxFQUFBRyxXQUFBUixFQUFBbUcsaUJBRUE5RixFQUFBQyxPQUFBOUMsSUFBQSxTQUFBb0UsR0FDQSxJQUFBMkMsRUFBQSxJQUFBQyxPQUFBNUMsRUFBQWUsS0FBQWYsRUFBQWdCLElBQ0EzQyxFQUFBd0UsT0FBQUYsS0FFQWxFLEVBQUFFLE9BQUEvQyxJQUFBLFNBQUFvRSxHQUNBLElBQUEyQyxFQUFBLElBQUFDLE9BQUE1QyxFQUFBZSxLQUFBZixFQUFBZ0IsSUFDQTFDLEVBQUF1RSxPQUFBRixLQUVBbEUsRUFBQUcsV0FBQWhELElBQUEsU0FBQW9FLEdBQ0EsSUFBQTJDLEVBQUEsSUFBQUMsT0FBQTVDLEVBQUFlLEtBQUFmLEVBQUFnQixJQUNBekMsRUFBQXNFLE9BQUFGLEtBRUE5QyIsImZpbGUiOiJjdXN0b20uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCkge1xuXG4gIG1vYmlsZU5hdmlnYXRpb24oKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGhlYWRlckhlaWdodCgpO1xuICAgIHRpdGxlQWxpZ24oKTtcbiAgICBtYXBXaWR0aCgpO1xuICAgIG5ld1Byb3BlcnRpZXNJdGVtSGVpZ2h0KCk7XG4gICAgb2JqZWN0Rml0U2ltdWxhdGlvbigpO1xuICB9LCAxMTEpO1xuXG4gICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7fSk7XG5cbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICBoZWFkZXJIZWlnaHQoKTtcbiAgICB0aXRsZUFsaWduKCk7XG4gICAgbWFwV2lkdGgoKTtcbiAgICBuZXdQcm9wZXJ0aWVzSXRlbUhlaWdodCgpO1xuICAgIG1vYmlsZU5hdmlnYXRpb24oKTtcbiAgfSk7XG4gICQoJy5tZW51LWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgJCgnLmhlYWRlcl9fYm90dG9tX19uYXYnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gIH0pO1xufSk7XG5cbi8vb2JqZWN0LWZpdC1zaW11bGF0aW9uXG5mdW5jdGlvbiBvYmplY3RGaXRTaW11bGF0aW9uKCl7XG4gIHZhciBzaW11bGF0b3IgPSAkKCcub2JqZWN0LWZpdC1zaW11bGF0aW9uJyk7XG4gIHZhciBpbWcgPSBzaW11bGF0b3IuZmluZCgnaW1nJyk7XG4gIHZhciBpbWdTcmMgPSBpbWcuYXR0cignc3JjJyk7XG4gIGltZy5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XG4gIHNpbXVsYXRvci5jc3Moe1xuICAgICdiYWNrZ3JvdW5kJzondXJsKCcraW1nU3JjKycpIG5vLXJlcGVhdCBjZW50ZXIgLyBjb3ZlcicsXG4gIH0pO1xufVxuLy93ZWJpbmFyIGhlaWdodFxuZnVuY3Rpb24gaGVhZGVySGVpZ2h0KCkge1xuICB2YXIgaGVpZ2h0ID0gJChcImhlYWRlci5oZWFkZXJcIikub3V0ZXJIZWlnaHQoKTtcbiAgJChcInNlY3Rpb24ud2ViaW5hci1pbmZvXCIpLmNzcyhcIm1pbi1oZWlnaHRcIiwgXCJjYWxjKDEwMHZoIC0gXCIgKyBoZWlnaHQgKyBcInB4KVwiKTtcbn1cblxuLy93ZWJpbmFyIHRpdGxlIGFsaWduXG5mdW5jdGlvbiB0aXRsZUFsaWduKCkge1xuICB2YXIgaXRlbXMgPSAkKFwiLndlYmluYXItaW5mbyBoMlwiKTtcbiAgdmFyIGRlZmF1bHRNYXJnaW4gPSBpdGVtcy5jc3MoJ21hcmdpbkJvdHRvbScpO1xuICB2YXIgbWF4O1xuICB2YXIgbWluO1xuICB2YXIgaGVpZ2h0O1xuICBpZiAoJChpdGVtc1swXSkub3V0ZXJIZWlnaHQoKSA8PSAkKGl0ZW1zWzFdKS5vdXRlckhlaWdodCgpKSB7XG4gICAgJChpdGVtc1swXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIGRlZmF1bHRNYXJnaW5cbiAgICApO1xuICAgIG1pbiA9ICQoaXRlbXNbMF0pLm91dGVySGVpZ2h0KCk7XG4gICAgbWF4ID0gJChpdGVtc1sxXSkub3V0ZXJIZWlnaHQoKTtcbiAgICBoZWlnaHQgPSBtYXggLSBtaW47XG4gICAgJChpdGVtc1swXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIHBhcnNlRmxvYXQoJChpdGVtc1swXSkuY3NzKFwibWFyZ2luQm90dG9tXCIpKSArIGhlaWdodCArIFwicHhcIlxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgJChpdGVtc1sxXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIGRlZmF1bHRNYXJnaW5cbiAgICApO1xuICAgIG1pbiA9ICQoaXRlbXNbMV0pLm91dGVySGVpZ2h0KCk7XG4gICAgbWF4ID0gJChpdGVtc1swXSkub3V0ZXJIZWlnaHQoKTtcbiAgICBoZWlnaHQgPSBtYXggLSBtaW47XG4gICAgJChpdGVtc1sxXSkuY3NzKFxuICAgICAgXCJtYXJnaW5Cb3R0b21cIixcbiAgICAgIHBhcnNlRmxvYXQoJChpdGVtc1sxXSkuY3NzKFwibWFyZ2luQm90dG9tXCIpKSArIGhlaWdodCArIFwicHhcIlxuICAgICk7XG4gIH1cbn1cblxuLy9tYXAgc2l6ZVxuZnVuY3Rpb24gbWFwV2lkdGgoKSB7XG4gIHZhciB3aW5kb3dXaWR0aCA9ICQoXCJib2R5XCIpLm91dGVyV2lkdGgoKTtcbiAgdmFyIG1hcE9mZnNldCA9ICQoXCIuc2VtaW5hcmUtYW5kLW1hcCAubWFwXCIpLm9mZnNldCgpLmxlZnQ7XG4gIHZhciBzZW1pbmFyV0lkdGggPSAkKCcuc2VtaW5hcmUtYW5kLW1hcCAuc2VtaW5hcmUnKS5vdXRlcldpZHRoKCk7XG4gIHZhciBjb250YWluZXJQYWRkaW5nID0gcGFyc2VGbG9hdCgkKCcuc2VtaW5hcmUtYW5kLW1hcCAuY29udGFpbmVyJykuY3NzKCdwYWRkaW5nTGVmdCcpKTtcbiAgdmFyIGNvbnRhaW5lckhlaWdodCA9IHBhcnNlRmxvYXQoJCgnLnNlbWluYXJlLWFuZC1tYXAgLmNvbnRhaW5lcicpLm91dGVySGVpZ2h0KCkpO1xuICAkKFwiLnNlbWluYXJlLWFuZC1tYXAgLm1hcFwiKS5jc3Moe1xuICAgIFwid2lkdGhcIjogd2luZG93V2lkdGggLSBtYXBPZmZzZXQgKyBcInB4XCIsXG4gICAgJ2xlZnQnOiBzZW1pbmFyV0lkdGggKyBjb250YWluZXJQYWRkaW5nICsgJ3B4JyxcbiAgICAnaGVpZ2h0JzogY29udGFpbmVySGVpZ2h0ICsgJ3B4J1xuICB9KTtcbn1cblxuLy8gbmV3LXByb3Blcml0aWVzIG5ldy1wcm9wZXJ0aWVzX19pdGVtX190ZXh0IGhlaWdodFxuZnVuY3Rpb24gbmV3UHJvcGVydGllc0l0ZW1IZWlnaHQoKXtcbiAgdmFyIGl0ZW1zTGluZUhlaWdodCA9IHBhcnNlRmxvYXQoJCgnLm5ldy1wcm9wZXJ0aWVzX19pdGVtX190ZXh0IHAnKS5jc3MoJ2xpbmVIZWlnaHQnKSk7XG4gIHZhciBpdGVtc1RleHRUaXRsZSA9ICQoJy5uZXctcHJvcGVydGllc19faXRlbV9fdGV4dCBoMycpO1xuICB2YXIgaXRlbXNMb2NhdGlvbkhlaWdodCA9ICAkKCcubmV3LXByb3BlcnRpZXNfX2l0ZW1fX2xvY2F0aW9uIGRpdicpO1xuICB2YXIgbWF4SGVpZ2h0MSA9IDA7XG4gIHZhciBtYXhIZWlnaHQyID0gMDtcbiAgaXRlbXNMb2NhdGlvbkhlaWdodC5tYXAoZnVuY3Rpb24oKXtcbiAgICBpZigkKHRoaXMpLm91dGVySGVpZ2h0KCkgPj0gbWF4SGVpZ2h0MSl7XG4gICAgICBtYXhIZWlnaHQxID0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xuICAgIH1cbiAgfSk7XG4gIGl0ZW1zVGV4dFRpdGxlLm1hcChmdW5jdGlvbigpe1xuICAgIGlmKCQodGhpcykuaGVpZ2h0KCkgPj0gbWF4SGVpZ2h0Mil7XG4gICAgICBtYXhIZWlnaHQyID0gJCh0aGlzKS5oZWlnaHQoKTtcbiAgICB9XG4gIH0pO1xuICBpdGVtc0xvY2F0aW9uSGVpZ2h0LmNzcygnaGVpZ2h0JywgbWF4SGVpZ2h0MSArICdweCcpO1xuICBpdGVtc1RleHRUaXRsZS5jc3MoJ2hlaWdodCcsIG1heEhlaWdodDIgKyAncHgnKTtcbiAgJCgnLm5ldy1wcm9wZXJ0aWVzX19pdGVtX190ZXh0IHAnKS5jc3MoJ2hlaWdodCcsIGl0ZW1zTGluZUhlaWdodCAqIDIgKyAncHgnKTtcbn1cblxuZnVuY3Rpb24gbW9iaWxlTmF2aWdhdGlvbigpe1xuICB2YXIgbmF2ID0gJCgnLmhlYWRlcl9fYm90dG9tX19uYXYnKTtcbiAgdmFyIHBob25lcyA9ICQoJy5oZWFkZXJfX21pZF9fY29udGFjdHNfX3Bob25lcycpO1xuICB2YXIgdWwgPSBuYXYuY2hpbGRyZW4oJ3VsJyk7XG4gIHZhciBzb2NpYWwgPSAkKCcuaGVhZGVyX190b3AgLnNvY2lhbCcpO1xuICB2YXIgbG9nT3JSZWcgPSAkKCcuaGVhZGVyX190b3AgLmxvZy1vci1yZWcnKTtcbiAgaWYobmF2LmNzcygncG9zaXRpb24nKSA9PT0gJ2Fic29sdXRlJyl7XG4gICAgdWwud3JhcCgnPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPjwvZGl2PicpO1xuICAgIHBob25lcy5hcHBlbmRUbyhuYXYuY2hpbGRyZW4oJy5jb250YWluZXInKSk7XG4gICAgc29jaWFsLmFwcGVuZFRvKG5hdi5jaGlsZHJlbignLmNvbnRhaW5lcicpKTtcbiAgICBsb2dPclJlZy5hcHBlbmRUbyhuYXYuY2hpbGRyZW4oJy5jb250YWluZXInKSk7XG4gIH1lbHNle1xuICAgIC8vIGxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG59IiwiLy8gLy9Hb29nbGUgTWFwXG4vLzxpbnB1dCBpZD1cImxhdGl0dWRlXCIgdHlwZT1cImhpZGRlblwiIHQtYXR0LXZhbHVlPVwiY291bnRyeS5sYXRpdHVkZVwiLz5cbi8vPGlucHV0IGlkPVwibG9uZ2l0dWRlXCIgdHlwZT1cImhpZGRlblwiIHQtYXR0LXZhbHVlPVwiY291bnRyeS5sb25naXR1ZGVcIi8+XG4vLzxpbnB1dCBpZD1cInRlbXBsYXRlX3R5cGVcIiB0eXBlPVwiaGlkZGVuXCIgdC1hdHQtdmFsdWU9XCJ0ZW1wbGF0ZV90eXBlXCIvPiBcblxud2luZG93LmluaXRNYXAgPSBpbml0TWFwO1xudmFyIHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvanNvbi9kYXRhLmpzb24nO1xudmFyIG1hcDtcbnZhciBtYXJrZXJzID0gW107XG52YXIgc3RhcnRQb3NpdGlvbjtcbnZhciBvYmplY3RzO1xudmFyIHNlYXJjaFJlc3VsdDtcbnZhciBjaGVja1N0YXRlO1xuLy8gdmFyIHNpbXBsZUJhclVsID0gbmV3IFNpbXBsZUJhcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWxpc3QnKSk7XG5cbi8v0JfQvdCw0YfQtdC90L3RjyDQtNC70Y8gc2VsZWN0XG52YXIgZmlsdGVyVmFsdWVzID0ge1xuICBzdGF0ZXM6W10sXG4gIGNpdGllczpbXSxcbiAgZXZlbnRzVHlwZTpbXVxufTtcblxudmFyIHNlbGVjdFN0YXRlO1xudmFyIHNlbGVjdENpdHk7XG52YXIgc2VsZWN0VHlwZTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgc3RhcnRQb3NpdGlvbiA9IHtcbiAgICBsYXQgOiAkKCcjbGF0aXR1ZGUnKS52YWwoKSB8fCA1MC45OTEzMjQ5LFxuICAgIGxvZyA6ICQoJyNsb25naXR1ZGUnKS52YWwoKSB8fCA5LjQ3MjE5NjYsXG4gICAgdHlwZSA6ICQoJyN0ZW1wbGF0ZV90eXBlJykudmFsKCkgfHwgJ3RlcnJhaW4nXG4gIH07XG5cbiAgLy9HZXQgc2VsZWN0c1xuICBzZWxlY3RTdGF0ZSA9ICQoJy5zZW1pbmFyZV9fc2VhcmNoX19maWx0ZXJfX3N0YXRlIHNlbGVjdCcpO1xuICBzZWxlY3RDaXR5ID0gJCgnLnNlbWluYXJlX19zZWFyY2hfX2ZpbHRlcl9fY2l0eSBzZWxlY3QnKTtcbiAgc2VsZWN0VHlwZSA9ICQoJy5zZW1pbmFyZV9fc2VhcmNoX19maWx0ZXJfX3R5cGUgc2VsZWN0Jyk7XG5cbiAgc2VsZWN0U3RhdGUuc2VsZWN0Mih7XG4gICAgcGxhY2Vob2xkZXI6IFwiU2VsZWN0IGEgc3RhdGVcIixcbiAgICBhbGxvd0NsZWFyOiB0cnVlXG4gIH0pO1xuICBzZWxlY3RDaXR5LnNlbGVjdDIoe1xuICAgIHBsYWNlaG9sZGVyOiBcIlNlbGVjdCBhIGNpdHlcIixcbiAgICBhbGxvd0NsZWFyOiB0cnVlXG4gIH0pO1xuICBzZWxlY3RUeXBlLnNlbGVjdDIoe1xuICAgIHBsYWNlaG9sZGVyOiBcIlNlbGVjdCBhIGV2ZW50IHR5cGVcIixcbiAgICBhbGxvd0NsZWFyOiB0cnVlXG4gIH0pO1xuICBcbiAgLy9GaWx0ZXJcbiAgJCgnLnNlbGVjdDItc2VsZWN0aW9uX19jbGVhcicpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgZmlsdGVyU29ydChzZWxlY3RTdGF0ZS52YWwoKSxzZWxlY3RDaXR5LnZhbCgpLHNlbGVjdFR5cGUudmFsKCkpO1xuICB9KTtcblxuICAkKCcuc2VtaW5hcmVfX3NlYXJjaF9fZmlsdGVyIHNlbGVjdCcpLmNoYW5nZShmdW5jdGlvbigpeyAgIFxuICAgIGZpbHRlclNvcnQoc2VsZWN0U3RhdGUudmFsKCksc2VsZWN0Q2l0eS52YWwoKSxzZWxlY3RUeXBlLnZhbCgpKTtcbiAgfSk7XG4gICQoJy5zZW1pbmFyZV9fc2VhcmNoX19maWx0ZXJfX2NpdHkgc2VsZWN0JykuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgaWYoICFzZWxlY3RTdGF0ZS52YWwoKSAmJiBzZWxlY3RDaXR5LnZhbCgpKXtcbiAgICAgIHNlbGVjdFN0YXRlLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGVjdFN0YXRlLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH1cbiAgICBmaWx0ZXJTb3J0KHNlbGVjdFN0YXRlLnZhbCgpLHNlbGVjdENpdHkudmFsKCksc2VsZWN0VHlwZS52YWwoKSk7XG4gIH0pO1xuICAkKCcuc2VtaW5hcmVfX3NlYXJjaF9fZmlsdGVyX19zdGF0ZSBzZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICBpZigkKHRoaXMpLnZhbCgpKXtcbiAgICAgIGZpbHRlclZhbHVlcy5jaXRpZXMgPSBbXTtcbiAgICAgIGZpbHRlclZhbHVlcy5jaXRpZXMgPSBfLmZpbHRlcihvYmplY3RzLmNpdGllc19kaWN0LHsgc3RhdGVfaWQ6IE51bWJlcigkKHRoaXMpLnZhbCgpKX0pO1xuICAgICAgc2VsZWN0Q2l0eS5odG1sKCc8b3B0aW9uPjwvb3B0aW9uPicpO1xuICAgICAgZmlsdGVyVmFsdWVzLmNpdGllcy5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgIHZhciBvcHRpb24gPSBuZXcgT3B0aW9uKGl0ZW0ubmFtZSxpdGVtLmlkKTtcbiAgICAgICAgc2VsZWN0Q2l0eS5hcHBlbmQob3B0aW9uKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaWx0ZXJWYWx1ZXMuY2l0aWVzID0gW107XG4gICAgICBmaWx0ZXJWYWx1ZXMuY2l0aWVzID0gb2JqZWN0cy5jaXRpZXNfZGljdDtcbiAgICAgIHNlbGVjdENpdHkuaHRtbCgnPG9wdGlvbj48L29wdGlvbj4nKTtcbiAgICAgIGZpbHRlclZhbHVlcy5jaXRpZXMubWFwKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICB2YXIgb3B0aW9uID0gbmV3IE9wdGlvbihpdGVtLm5hbWUsaXRlbS5pZCk7XG4gICAgICAgIHNlbGVjdENpdHkuYXBwZW5kKG9wdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZmlsdGVyU29ydChzZWxlY3RTdGF0ZS52YWwoKSxzZWxlY3RDaXR5LnZhbCgpLHNlbGVjdFR5cGUudmFsKCkpO1xuICB9KTtcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywnLm1hcmtlci1pbmZvJyxmdW5jdGlvbigpe1xuICAgIGlmKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5tYXJrZXItaW5mbycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICBcbiAgfSk7XG4gICQud2hlbigkLmFqYXgoe1xuICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgdXJsOiAgdXJsLFxuICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICBhc3luYzogZmFsc2UsIC8vINCX0LDQsdGA0LDRgtC4INC60L7Qu9C4INCx0YPQtNC10Ygg0L3QsCDQsdC10Lot0LXQvdC0INGB0YLRg9C60LDRgtC40YHRjFxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgb2JqZWN0cyA9IGRhdGE7XG4gICAgICBzZWFyY2hSZXN1bHQgPSBkYXRhLmV2ZW50c19kaWN0O1xuICAgICAgY29uc29sZS5sb2coJ2dvb2Q6ICcsb2JqZWN0cyk7XG4gICAgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcsX2Vycm9yKTtcbiAgICB9XG4gIH0pKS5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICBsb2FkU2NyaXB0TWFwKCk7IC8v0KDQvtC30LrQvtC80LXQvdGC0YPQstCw0YLQuCDQutC+0LvQuCDQvNCw0L/QsCDQstC60LvRjtGH0LXQvdCwXG4gICAgZmlsdGVyVmFsdWVzLnN0YXRlcyA9IG9iamVjdHMuc3RhdGVfZGljdDtcbiAgICBmaWx0ZXJWYWx1ZXMuY2l0aWVzID0gb2JqZWN0cy5jaXRpZXNfZGljdDtcbiAgICBmaWx0ZXJWYWx1ZXMuZXZlbnRzVHlwZSA9IG9iamVjdHMuZXZlbnRfY2F0ZWdvcmllcztcbiAgICBcbiAgICBmaWx0ZXJWYWx1ZXMuc3RhdGVzLm1hcChmdW5jdGlvbihpdGVtKXtcbiAgICAgIHZhciBvcHRpb24gPSBuZXcgT3B0aW9uKGl0ZW0ubmFtZSxpdGVtLmlkKTtcbiAgICAgIHNlbGVjdFN0YXRlLmFwcGVuZChvcHRpb24pO1xuICAgIH0pO1xuICAgIGZpbHRlclZhbHVlcy5jaXRpZXMubWFwKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgdmFyIG9wdGlvbiA9IG5ldyBPcHRpb24oaXRlbS5uYW1lLGl0ZW0uaWQpO1xuICAgICAgc2VsZWN0Q2l0eS5hcHBlbmQob3B0aW9uKTtcbiAgICB9KTtcbiAgICBmaWx0ZXJWYWx1ZXMuZXZlbnRzVHlwZS5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgICB2YXIgb3B0aW9uID0gbmV3IE9wdGlvbihpdGVtLm5hbWUsaXRlbS5pZCk7XG4gICAgICBzZWxlY3RUeXBlLmFwcGVuZChvcHRpb24pO1xuICAgIH0pO1xuICAgIGJ1aWxkU2VhcmNoTGlzdCgpO1xuXG4gIH0pO1xufSk7XG5cblxuZnVuY3Rpb24gbG9hZFNjcmlwdE1hcCgpIHtcbiAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICBzY3JpcHQuZGVmZXIgPSB0cnVlO1xuICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9qcz9rZXk9QUl6YVN5RGZjczZtVjBYcXlGcXBvMzRHU0FUS0x0ZVBxVGdjMFdJJmNhbGxiYWNrPWluaXRNYXAnO1xuICB2YXIgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RTY3JpcHRUYWcpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG59XG5cbmZ1bmN0aW9uIGZpbHRlclNvcnQoc3RhdGUsY2l0eSxldmVudF90eXBlKXtcbiAgZGVsZXRlTWFya2VycygpOyAvL9Cg0L7Qt9C60L7QvNC10L3RgtGD0LLQsNGC0Lgg0LrQvtC70Lgg0LzQsNC/0LAg0LLQutC70Y7Rh9C10L3QsFxuICB2YXIgb2JqID0ge1xuICAgIHN0YXRlX2lkOiBzdGF0ZSA/IFtOdW1iZXIoc3RhdGUpXSA6IG51bGwsXG4gICAgY2l0eV9pZDogY2l0eSA/IFtOdW1iZXIoY2l0eSldIDogbnVsbCxcbiAgICBldmVudF90eXBlX2lkOiBldmVudF90eXBlID8gW051bWJlcihldmVudF90eXBlKV0gOiBudWxsICxcbiAgfTtcbiAgXG4gIHZhciBmaW5kT2JqID0gXy5waWNrQnkob2JqLCBfLmlkZW50aXR5KTtcbiAgc2VhcmNoUmVzdWx0ID0gXy5maWx0ZXIob2JqZWN0cy5ldmVudHNfZGljdCwgZmluZE9iaik7XG4gIGJ1aWxkU2VhcmNoTGlzdCgpO1xuICBjcmVhdGVNYXJrZXJzR3JvdXAoc2VhcmNoUmVzdWx0KTsgLy/QoNC+0LfQutC+0LzQtdC90YLRg9Cy0LDRgtC4INC60L7Qu9C4INC80LDQv9CwINCy0LrQu9GO0YfQtdC90LBcbiAgc2hvd01hcmtlcnMoKTsgLy/QoNC+0LfQutC+0LzQtdC90YLRg9Cy0LDRgtC4INC60L7Qu9C4INC80LDQv9CwINCy0LrQu9GO0YfQtdC90LBcbn1cblxuZnVuY3Rpb24gYnVpbGRTZWFyY2hMaXN0KCl7XG4gIHZhciB1bCA9ICQoJy5zZW1pbmFyZV9fc2VhcmNoX19saXN0IHVsJyk7XG4gIHZhciBsaTtcbiAgdWwuaHRtbCgnJyk7XG4gIHNlYXJjaFJlc3VsdC5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIHZhciBzdHJlZXQgPSBpdGVtLnN0cmVldCA/IGl0ZW0uc3RyZWV0IDogJyc7XG4gICAgdmFyIHppcCA9IGl0ZW0uemlwID8gaXRlbS56aXAgOiAnJztcbiAgICB2YXIgY2l0eSA9IGl0ZW0uY2l0eV9pZFsxXSA/IGl0ZW0uY2l0eV9pZFsxXSA6ICcnO1xuICAgIHZhciBkYXRlID0gU3RyaW5nKGl0ZW0uZGF0ZV9iZWdpbikuc3Vic3RyKDAsIDkpLnJlcGxhY2UoJy0nLCcuJykucmVwbGFjZSgnLScsJy4nKTtcbiAgICBkYXRlID0gZGF0ZS5zcGxpdCgnLicpO1xuICAgIGRhdGUgPSBkYXRlLnJldmVyc2UoKTtcbiAgICBkYXRlID0gZGF0ZS5qb2luKCcuJyk7XG4gICAgdmFyIHRpbWVTdGFydCA9IFN0cmluZyhpdGVtLmRhdGVfYmVnaW4pLnJlcGxhY2UoJzonLCcuJykucmVwbGFjZSgnOicsJy4nKS5zdWJzdHIoMTEsMTUpO1xuICAgIHZhciB0aW1lRW5kID0gU3RyaW5nKGl0ZW0uZGF0ZV9lbmQpLnJlcGxhY2UoJzonLCcuJykucmVwbGFjZSgnOicsJy4nKS5zdWJzdHIoMTEsMTUpO1xuICAgIHRpbWVTdGFydCA9IHRpbWVTdGFydC5zdWJzdHIoMCw1KTtcbiAgICB0aW1lRW5kID0gdGltZUVuZC5zdWJzdHIoMCw1KTtcbiAgICAkKGxpKS5odG1sKCc8aDM+JytpdGVtLm5hbWUrJzwvaDM+PGRpdj48cD4nICsgc3RyZWV0ICsgJyAnICsgemlwICsgJyAnICsgY2l0eSArICc8L3A+PGEgY2xhc3M9XCJidXR0b24gYmx1ZVwiIGhyZWY9XCJldmVudC8nICsgaXRlbS5pZCArICdcIj48c3Bhbj5QbGF0eiByZXNlcnZpZXJlbjwvc3Bhbj48L2E+PC9kaXY+PHNwYW4+QW0gJyArIGRhdGUgKyAnIHZvbiAnICsgdGltZVN0YXJ0ICsgJyBiaXMgJyArIHRpbWVFbmQgKyAnIFVocjwvc3Bhbj4nKTtcbiAgICAkKGxpKS5hcHBlbmRUbyh1bCk7XG4gIH0pO1xuICBcbiAgLy8gc2ltcGxlQmFyVWwuZ2V0Q29udGVudEVsZW1lbnQoKTtcbn1cblxuZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgdmFyIGhhaWdodEFzaGJ1cnkgPSB7bGF0OiBzdGFydFBvc2l0aW9uLmxhdCwgbG5nOiBzdGFydFBvc2l0aW9uLmxvZ307XG5cbiAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICB6b29tOiA3LFxuICAgIGNlbnRlcjogaGFpZ2h0QXNoYnVyeSxcbiAgICBtYXBUeXBlSWQ6IHN0YXJ0UG9zaXRpb24udHlwZVxuICB9KTtcbiAgY3JlYXRlTWFya2Vyc0dyb3VwKHNlYXJjaFJlc3VsdCk7XG4gIC8vIG1hcC5hZGRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAvLyAgIGFkZE1hcmtlcihldmVudC5sYXRMbmcpO1xuICAvLyB9KTtcbiAgLy8gYWRkTWFya2VyKGhhaWdodEFzaGJ1cnkpO1xufVxuXG5mdW5jdGlvbiBhZGRNYXJrZXIobG9jYXRpb24sY29udGVudFN0cmluZykge1xuICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgcG9zaXRpb246IGxvY2F0aW9uLFxuICAgIG1hcDogbWFwXG4gIH0pO1xuICBtYXJrZXIuc2V0VmlzaWJsZShmYWxzZSk7XG4gIHZhciBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgIGNvbnRlbnQ6IGNvbnRlbnRTdHJpbmdcbiAgfSk7XG4gIGluZm93aW5kb3cub3BlbihtYXAsIG1hcmtlcik7XG4gIG1hcmtlcnMucHVzaChtYXJrZXIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVNYXJrZXJzR3JvdXAoaXRlbXMpe1xuICBpdGVtcy5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgY29uc29sZS5sb2coaXRlbSk7XG4gICAgdmFyIHN0cmVldCA9IGl0ZW0uc3RyZWV0ID8gaXRlbS5zdHJlZXQgKyAnICwnIDogJyc7XG4gICAgdmFyIGNpdHkgPSBpdGVtLmNpdHlfaWRbMV0gPyBpdGVtLmNpdHlfaWRbMV0gKyAnICwnIDogJyc7XG4gICAgdmFyIGNvdW50cnkgPSAgaXRlbS5jb3VudHJ5X2lkWzFdID8gaXRlbS5jb3VudHJ5X2lkWzFdIDogJyc7XG4gICAgdmFyIHppcCA9IGl0ZW0uemlwID8gaXRlbS56aXAgOiAnJztcbiAgICB2YXIgY29udGVudFN0cmluZyA9ICc8ZGl2IGNsYXNzPVwibWFya2VyLWluZm9cIj48ZGl2IGNsYXNzPVwibWFya2VyLWluZm8tdGl0bGVcIj48c3Bhbj48L3NwYW4+PGgyPicraXRlbS5jaXR5X2lkWzFdKyc8L2gyPjwvZGl2PjxkaXYgY2xhc3M9XCJtYXJrZXItaW5mby1jb250ZW50XCI+PGEgaHJlZj1cInRlbDoxMjNcIiBjbGFzcz1cInBob25lXCI+MTIzMTIzMTIzMTIzPC9hPjxwIGNsYXNzPVwiYWRkcmVzc1wiPjxzcGFuPicrIHN0cmVldCArJzwvc3Bhbj48c3Bhbj4nKyB6aXAgKycgJysgY2l0eSArJzwvc3Bhbj4gPHNwYW4+JysgY291bnRyeSArJzwvc3Bhbj48L3A+PC9kaXY+IDwvZGl2Pic7XG4gICAgYWRkTWFya2VyKHtcbiAgICAgIGxhdDogaXRlbS5sYXRpdHVkZSwgXG4gICAgICBsbmc6IGl0ZW0ubG9uZ2l0dWRlXG4gICAgfSxjb250ZW50U3RyaW5nKTtcbiAgfSk7IFxufVxuXG5mdW5jdGlvbiBzZXRNYXBPbkFsbChtYXApIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgbWFya2Vyc1tpXS5zZXRNYXAobWFwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGVhck1hcmtlcnMoKSB7XG4gIHNldE1hcE9uQWxsKG51bGwpO1xufVxuXG5mdW5jdGlvbiBzaG93TWFya2VycygpIHtcbiAgc2V0TWFwT25BbGwobWFwKTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlTWFya2VycygpIHtcbiAgY2xlYXJNYXJrZXJzKCk7XG4gIG1hcmtlcnMgPSBbXTtcbn1cblxuXG4vL0N1c3RvbSBNYXJrZXIgSFRNTFxuXG4vLyBmdW5jdGlvbiBDdXN0b21NYXJrZXIobGF0bG5nLCBtYXAsIGFyZ3MpIHtcbi8vIFx0dGhpcy5sYXRsbmcgPSBsYXRsbmc7XHRcbi8vIFx0dGhpcy5hcmdzID0gYXJncztcdFxuLy8gXHR0aGlzLnNldE1hcChtYXApO1x0XG4vLyB9XG5cbi8vIEN1c3RvbU1hcmtlci5wcm90b3R5cGUgPSBuZXcgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcoKTtcblxuLy8gQ3VzdG9tTWFya2VyLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XG5cdFxuLy8gXHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuLy8gXHR2YXIgZGl2ID0gdGhpcy5kaXY7XG5cdFxuLy8gXHRpZiAoIWRpdikge1xuXHRcbi8vIFx0XHRkaXYgPSB0aGlzLmRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFxuLy8gXHRcdGRpdi5jbGFzc05hbWUgPSAnbWFya2VyJztcblx0XHRcbi8vIFx0XHRkaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuLy8gXHRcdGRpdi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4vLyBcdFx0ZGl2LnN0eWxlLndpZHRoID0gJzIwcHgnO1xuLy8gXHRcdGRpdi5zdHlsZS5oZWlnaHQgPSAnMjBweCc7XG4vLyBcdFx0ZGl2LnN0eWxlLmJhY2tncm91bmQgPSAnYmx1ZSc7XG5cdFx0XG4vLyBcdFx0aWYgKHR5cGVvZihzZWxmLmFyZ3MubWFya2VyX2lkKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbi8vIFx0XHRcdGRpdi5kYXRhc2V0Lm1hcmtlcl9pZCA9IHNlbGYuYXJncy5tYXJrZXJfaWQ7XG4vLyBcdFx0fVxuXHRcdFxuLy8gXHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKGRpdiwgXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1x0XHRcdFxuLy8gXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihzZWxmLCBcImNsaWNrXCIpO1xuLy8gXHRcdH0pO1xuXHRcdFxuLy8gXHRcdHZhciBwYW5lcyA9IHRoaXMuZ2V0UGFuZXMoKTtcbi8vIFx0XHRwYW5lcy5vdmVybGF5SW1hZ2UuYXBwZW5kQ2hpbGQoZGl2KTtcbi8vIFx0fVxuXHRcbi8vIFx0dmFyIHBvaW50ID0gdGhpcy5nZXRQcm9qZWN0aW9uKCkuZnJvbUxhdExuZ1RvRGl2UGl4ZWwodGhpcy5sYXRsbmcpO1xuXHRcbi8vIFx0aWYgKHBvaW50KSB7XG4vLyBcdFx0ZGl2LnN0eWxlLmxlZnQgPSBwb2ludC54ICsgJ3B4Jztcbi8vIFx0XHRkaXYuc3R5bGUudG9wID0gcG9pbnQueSArICdweCc7XG4vLyBcdH1cbi8vIH07XG5cbi8vIEN1c3RvbU1hcmtlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4vLyBcdGlmICh0aGlzLmRpdikge1xuLy8gXHRcdHRoaXMuZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kaXYpO1xuLy8gXHRcdHRoaXMuZGl2ID0gbnVsbDtcbi8vIFx0fVx0XG4vLyB9O1xuXG4vLyBDdXN0b21NYXJrZXIucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4vLyBcdHJldHVybiB0aGlzLmxhdGxuZztcdFxuLy8gfTtcblxuXG5cbiJdfQ==
